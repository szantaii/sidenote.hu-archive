<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>szoftver &#8211; sidenote</title>
	<atom:link href="http://sidenote.hu/category/szoftver/feed/" rel="self" type="application/rss+xml" />
	<link>http://sidenote.hu</link>
	<description></description>
	<lastBuildDate>Fri, 14 Aug 2020 14:56:44 +0000</lastBuildDate>
	<language>hu</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.8.15</generator>
	<item>
		<title>bash-weather update</title>
		<link>http://sidenote.hu/2015/03/26/bash-weather-update/</link>
		<comments>http://sidenote.hu/2015/03/26/bash-weather-update/#comments</comments>
		<pubDate>Thu, 26 Mar 2015 19:16:27 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[Bash]]></category>
		<category><![CDATA[retro]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8680</guid>
		<description><![CDATA[About a year ago I got a request on GitHub regarding bash-weather, if I intend to make bash-weather print a colored output. I totally forgot&#8230;]]></description>
				<content:encoded><![CDATA[<p>About a year ago I got a request on GitHub regarding <a href="https://github.com/szantaii/bash-weather" title="bash-weather on GitHub">bash-weather</a>, if I intend to make bash-weather print a colored output. I totally forgot about it. But when the other day I was browsing on GitHub I remembered this request, and I have written the &ldquo;colored output feature&rdquo;. </p>
<p><img src="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_01.png" alt="bash-weather" width="642" height="410" class="alignnone size-full wp-image-8684" srcset="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_01.png 642w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_01-225x144.png 225w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_01-350x224.png 350w" sizes="(max-width: 642px) 100vw, 642px" /></p>
<p><a href="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_02.png"><img src="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_02-225x144.png" alt="bash-weather" width="225" height="144" class="alignnone size-thumbnail wp-image-8683" srcset="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_02-225x144.png 225w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_02-350x224.png 350w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_02.png 642w" sizes="(max-width: 225px) 100vw, 225px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_03.png"><img src="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_03-225x144.png" alt="bash-weather" width="225" height="144" class="alignnone size-thumbnail wp-image-8682" srcset="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_03-225x144.png 225w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_03-350x224.png 350w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_03.png 642w" sizes="(max-width: 225px) 100vw, 225px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_04.png"><img src="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_04-225x144.png" alt="bash-weather" width="225" height="144" class="alignnone size-thumbnail wp-image-8681" srcset="http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_04-225x144.png 225w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_04-350x224.png 350w, http://sidenote.hu/wp-content/uploads/2015/03/bash-weather_04.png 642w" sizes="(max-width: 225px) 100vw, 225px" /></a></p>
<p>&#10003;</p>
<p>Also, there are some videos about bash-weather and my previous shell scripts (<a href="https://github.com/szantaii/bash-gorillas" title="bash-gorillas on GitHub">bash-gorillas</a>, <a href="https://github.com/szantaii/bash-life" title="bash-life on GitHub">bash-life</a>) made by a guy who I think is really into command-line applications (I can understand why).</p>
<p><iframe width="705" height="397" src="https://www.youtube.com/embed/EAbeSyAOtA4?rel=0" frameborder="0" allowfullscreen></iframe></p>
<ul>
<li><a href="https://www.youtube.com/watch?v=YSDhEQ6hZbU" title="bash-life on YouTube">bash-life on YouTube</a></li>
<li><a href="https://www.youtube.com/watch?v=9JzTeGfhipY" title="bash-weather, weather report written in Bash on YouTube">bash-weather, weather report written in Bash on YouTube</a></li>
</ul>
<p>Check out the description below the videos. ;)</p>
<p>&#9220;</p>
]]></content:encoded>
			<wfw:commentRss>http://sidenote.hu/2015/03/26/bash-weather-update/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Introducing Mirror π</title>
		<link>http://sidenote.hu/2015/01/01/introducing-mirror-%cf%80/</link>
		<comments>http://sidenote.hu/2015/01/01/introducing-mirror-%cf%80/#comments</comments>
		<pubDate>Thu, 01 Jan 2015 18:12:35 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[hardver]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[Bash]]></category>
		<category><![CDATA[Mirror π]]></category>
		<category><![CDATA[Raspberry Pi]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8674</guid>
		<description><![CDATA[I have been working on a project since last (2014) spring. I have been building a mirror inspired by Michael Teeuw&#8217;s Magic Mirror and now&#8230;]]></description>
				<content:encoded><![CDATA[<p>I have been working on a project since last (2014) spring. I have been building a mirror inspired by <a href="http://michaelteeuw.nl/tagged/magicmirror" title="Xonay Labs | Michael Teeuw">Michael Teeuw&#8217;s Magic Mirror</a> and now I have finished it! It is called <em>Mirror π,</em> and it is a &ldquo;smart mirror&rdquo;.</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01.jpg"><img src="http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01-705x705.jpg" alt="Mirror π" width="705" height="705" class="alignnone size-large wp-image-8677" srcset="http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01-705x705.jpg 705w, http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01-225x225.jpg 225w, http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01-350x350.jpg 350w, http://sidenote.hu/wp-content/uploads/2015/01/mirror_pi_01.jpg 1200w" sizes="(max-width: 705px) 100vw, 705px" /></a></p>
<p>What&#8217;s this all about? How is it smart? More posts to come (I hope sooner than later), until than you can already browse the <a href="https://github.com/szantaii/mirror-pi" title="szantaii/mirror-pi · GitHub">source code on GitHub</a>.</p>
]]></content:encoded>
			<wfw:commentRss>http://sidenote.hu/2015/01/01/introducing-mirror-%cf%80/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Another font outline animation experiment</title>
		<link>http://sidenote.hu/2014/09/28/another-font-outline-animation-experiment/</link>
		<pubDate>Sun, 28 Sep 2014 16:29:30 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[animáció]]></category>
		<category><![CDATA[művészet, dizájn]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[TeX/LaTeX]]></category>
		<category><![CDATA[tipográfia]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8638</guid>
		<description><![CDATA[In this animation was created using LuaTeX, TikZ, and the glyph &#8220;a&#8221; from the Linux Libertine font. The process which this animation resulted in was&#8230;]]></description>
				<content:encoded><![CDATA[<p><img src="http://sidenote.hu/wp-content/uploads/2014/09/another_font_outline_animation_experiment.gif" alt="Another font outline animation experiment" width="700" height="700" class="alignnone size-full wp-image-8639" /></p>
<p>In this animation was created using LuaTeX, TikZ, and the glyph &ldquo;a&rdquo; from the <a href="http://www.linuxlibertine.org/" title="LinuxLibertine.org | Public domain Fonts: Biolinum and Libertine">Linux Libertine</a> font.</p>
<p>The process which this animation resulted in was the following:</p>
<ol>
<li><a href="http://sidenote.hu/2014/09/15/experimenting-with-font-outlines/" title="Experimenting with font outlines / sidenote">Converted the font to SVG</a> to use the path of the glyph.</li>
<li>Split the path into the inner and outer outlines.</li>
<li>Draw the two separate lines with (different) dashed patterns.</li>
<li>Set increasing offset for the dashed patterns for each frame.</li>
<li>Rasterize and create GIF using <a href="http://www.gimp.org/" title="GIMP - The GNU Image Manipulation Program">GIMP</a>.</li>
</ol>
<p>Sorry, no source code this time.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Experimenting with font outlines</title>
		<link>http://sidenote.hu/2014/09/15/experimenting-with-font-outlines/</link>
		<pubDate>Mon, 15 Sep 2014 16:23:51 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[animáció]]></category>
		<category><![CDATA[művészet, dizájn]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[TeX/LaTeX]]></category>
		<category><![CDATA[tipográfia]]></category>
		<category><![CDATA[videó]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8617</guid>
		<description><![CDATA[In one of my latest posts I mentioned a question about how to draw individual glyphs with randomized paths on TeX.SX. Today I want to&#8230;]]></description>
				<content:encoded><![CDATA[<p>In <a href="http://sidenote.hu/2014/08/16/font-outline-animation/" title="Font outline animation / sidenote">one of my latest posts</a> I mentioned a question about <a href="http://tex.stackexchange.com/questions/161920/randomized-drawing-of-individual-glyphs" title="typography - Randomized drawing of individual glyphs - TeX - LaTeX Stack Exchange">how to draw individual glyphs with randomized paths</a> on <a href="http://tex.stackexchange.com/" title="TeX - LaTeX Stack Exchange">TeX.SX</a>. Today I want to share <a href="http://tex.stackexchange.com/a/197677/8844" title="typography - Randomized drawing of individual glyphs - TeX - LaTeX Stack Exchange">the answer I posted</a> about two weeks ago, and some related stuff which I&#8217;ve made during and after working on the answer.</p>
<p>Let&#8217;s see the question first. It is quoting Donald Knuth&#8217;s article, <a href="http://projecteuclid.org/euclid.bams/1183544082" title="Knuth: Mathematical typography">Mathematical typography</a> from the Bulletin of the American Mathematical Society.</p>
<blockquote>
<p><img src="http://sidenote.hu/wp-content/uploads/2014/09/knuth_math_typo_fig21.png" alt="Knuth: Mathematical typography, Figure 21" width="510" height="459" class="alignnone size-full wp-image-8625" srcset="http://sidenote.hu/wp-content/uploads/2014/09/knuth_math_typo_fig21.png 510w, http://sidenote.hu/wp-content/uploads/2014/09/knuth_math_typo_fig21-225x202.png 225w, http://sidenote.hu/wp-content/uploads/2014/09/knuth_math_typo_fig21-350x315.png 350w" sizes="(max-width: 510px) 100vw, 510px" /></p>
<p><strong>Randomization.</strong> I&#8217;d like to report on a little experiment I did with random numbers. One might complain that the letters I have designed are too perfect, too much like a computer, so they lack &ldquo;character&rdquo;. In order to counteract this, we can build a certain amount of randomness into the choices of where to put the pen when drawing each letter, and Figure 21 shows what happens. The coordinates of the key pen positions where chosen independently with a normal distribution and with increasing standard deviation, so that the third example has twice as much standard deviation as the second, the fourth has three times as much, and so on. Note that the two m&#8217;s on each line (except the first) are different, and so are the a&#8217;s and the t&#8217;s, since each letter is drawn randomly.</p>
</blockquote>
<p>The question was how to achieve a similar effect in LaTeX without using MetaFont. You can read the answer below, but if you feel tl;dr skip below the long quote for my related works.</p>
<blockquote>
<p>I have been thinking about this question for weeks now, and finally I think I came really close to a result you may also like. I have even tried to use Processing to solve this problem, which resulted in a nice animation as a byproduct, but it didn&#8217;t lead me closer to the solution. But back to the point&hellip;</p>
<p>Unfortunately the solution I&#8217;m posting, which is my best and only shot, does not support drawing the distorted glyphs as text but as drawings. Also there is some work to be done outside the context of LaTeX, but most of it is done in LaTeX (LuaTeX + TikZ).</p>
<p><img src="http://sidenote.hu/wp-content/uploads/2014/09/texsx_distortion_ans.png" alt="Randomized drawing of individual glyphs" width="629" height="504" class="alignnone size-full wp-image-8621" srcset="http://sidenote.hu/wp-content/uploads/2014/09/texsx_distortion_ans.png 629w, http://sidenote.hu/wp-content/uploads/2014/09/texsx_distortion_ans-225x180.png 225w, http://sidenote.hu/wp-content/uploads/2014/09/texsx_distortion_ans-350x280.png 350w" sizes="(max-width: 629px) 100vw, 629px" /></p>
<p>The picture above shows an undistorted glyph (character &ldquo;a&rdquo; on the left in the line at the top), a distorted glyph (character &ldquo;a&rdquo; on the right in the line at the top), a word consisting of distorted glyphs (middle line), and a special character (Omega), all these can be found in the code at the end of the answer.</p>
<p>Now I will describe the process I have followed to achieve these distortions. I mentioned that there is some work to be done outside of LaTeX, that is to convert a font file into SVG using FontForge. I found the solution how to do this in an answer to the question: Can we extract the points making the character from the font file?</p>
<p>Copy the following into a file named <code class="codecolorer text dawn"><span class="text">font2svg.pe</span></code> into your &ldquo;project&rdquo; folder.</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br /></div></td><td><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #666666; font-style: italic;">#!/usr/bin/env fontforge</span><br />
Open<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #007800;">$1</span><span style="color: #7a0874; font-weight: bold;">&#41;</span><br />
Generate<span style="color: #7a0874; font-weight: bold;">&#40;</span><span style="color: #007800;">$1</span>:t:r + <span style="color: #ff0000;">&quot;.svg&quot;</span><span style="color: #7a0874; font-weight: bold;">&#41;</span></div></td></tr></tbody></table></div>
<p>And make a SVG file from the font you want to use (I chose cmr10) with the following command.</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;">fontforge font2svg.pe <span style="color: #000000; font-weight: bold;">/</span>usr<span style="color: #000000; font-weight: bold;">/</span>local<span style="color: #000000; font-weight: bold;">/</span>texlive<span style="color: #000000; font-weight: bold;">/</span><span style="color: #000000;">2014</span><span style="color: #000000; font-weight: bold;">/</span>texmf-dist<span style="color: #000000; font-weight: bold;">/</span>fonts<span style="color: #000000; font-weight: bold;">/</span>type1<span style="color: #000000; font-weight: bold;">/</span>public<span style="color: #000000; font-weight: bold;">/</span>amsfonts<span style="color: #000000; font-weight: bold;">/</span>cm<span style="color: #000000; font-weight: bold;">/</span>cmr10.pfb</div></div>
<p>Note that the location of the font on the filesystem may vary based on your LaTeX installation and operating system you use, but this will generate an SVG file into your project folder. All is left to process the generated SVG file which contains the data (name, unicode code, width, and outline) of the glyphs, which I will describe below.</p>
<p>The function function <code class="codecolorer text dawn"><span class="text">read_font_data(file)</span></code> takes a file name as an argument (the generated SVG file), and extracts the data of the glyphs into an associative array which can be addressed with the unicode code and contains the width and outline data of the specific character. Note that not all glyphs have width or outline data, some basic error checking is done but the code is not foolproof.</p>
<p>The function <code class="codecolorer text dawn"><span class="text">random_in_interval(lower_boundary, upper_boundary)</span></code> takes two float arguments, and will return a random float between them. The more the boundaries converge to 1 the smaller the randomization will be. This will be used when the time comes to randomize the outline of a glyph.</p>
<p>The function <code class="codecolorer text dawn"><span class="text">scale_and_randomize(glyph, scale_factor, lower_boundary, upper_boundary)</span></code> will take a glyph, a scale factor, a lower and upper boundary, the latter two will be used for the randomization. Scaling is needed because the default measurement unit of TikZ is centimeters (I think) and the outline data of a glyph may contain large values, which TikZ interprets as centimeters. Note that the scale factor may vary depending the font you use, and size you want.</p>
<p>The functions <code class="codecolorer text dawn"><span class="text">print_glyph(glyph, scale_factor, lower_boundary, upper_boundary)</span></code> and <code class="codecolorer text dawn"><span class="text">return_glyph</span></code> (the latter takes the same arguments) only differ in that <code class="codecolorer text dawn"><span class="text">print_glyph</span></code> will pass the TikZ drawing command (using svg.path library) used to print the glyph to LaTeX, while <code class="codecolorer text dawn"><span class="text">return_glyph</span></code> only returns the drawing command as a string which can be further used in Lua before passing it to LaTeX.</p>
<p>The remaining functions only use the previously described <code class="codecolorer text dawn"><span class="text">print_glyph</span></code> and <code class="codecolorer text dawn"><span class="text">return_glyph</span></code> functions to print the picture above.</p>
<p>That&#8217;s it. I hope this would fit your needs.</p>
<div class="codecolorer-container lua dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br /></div></td><td><div class="lua codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #66cc66;">%</span> Randomized drawing of individual glyphs<br />
<span style="color: #66cc66;">%</span> Author<span style="color: #66cc66;">:</span> István Szántai <span style="color: #66cc66;">&#40;</span>szantaii<span style="color: #66cc66;">&#41;</span><br />
<span style="color: #66cc66;">%</span> Original at<span style="color: #66cc66;">:</span> http<span style="color: #66cc66;">://</span>tex<span style="color: #66cc66;">.</span>stackexchange<span style="color: #66cc66;">.</span>com<span style="color: #66cc66;">/</span>a<span style="color: #66cc66;">/</span><span style="color: #cc66cc;">197677</span><span style="color: #66cc66;">/</span><span style="color: #cc66cc;">8844</span><br />
\documentclass<span style="color: #66cc66;">&#91;</span>10pt<span style="color: #66cc66;">,</span> a4paper<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#123;</span>article<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#91;</span>T1<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#123;</span>fontenc<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">&#125;</span><br />
\usetikzlibrary<span style="color: #66cc66;">&#123;</span>svg<span style="color: #66cc66;">.</span>path<span style="color: #66cc66;">,</span> positioning<span style="color: #66cc66;">&#125;</span><br />
<br />
\pagestyle<span style="color: #66cc66;">&#123;</span>empty<span style="color: #66cc66;">&#125;</span><br />
<br />
\tikzset<span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">%</span><br />
&nbsp; &nbsp; glyph node<span style="color: #66cc66;">/.</span>style<span style="color: #66cc66;">=</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; inner sep<span style="color: #66cc66;">=</span>0pt<span style="color: #66cc66;">,%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; outer sep<span style="color: #66cc66;">=</span>0pt<span style="color: #66cc66;">%</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,%</span><br />
&nbsp; &nbsp; glyph outline<span style="color: #66cc66;">/.</span>style<span style="color: #66cc66;">=</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; line width<span style="color: #66cc66;">=</span>0pt<span style="color: #66cc66;">%</span><br />
&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">%</span><br />
<span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> read_font_data<span style="color: #66cc66;">&#40;</span>file<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> glyphs <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> fd <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">io.open</span><span style="color: #66cc66;">&#40;</span>file<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;r&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> content <span style="color: #66cc66;">=</span> fd<span style="color: #66cc66;">:</span><span style="color: #0000aa;">read</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;*all&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fd<span style="color: #66cc66;">.</span>close<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> glyph <span style="color: #aa9900; font-weight: bold;">in</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>gmatch<span style="color: #66cc66;">&#40;</span>content<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;&lt;glyph[^/&gt;]*&quot;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> glyph_tag <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.gsub</span><span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot; &quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> unicode <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>match<span style="color: #66cc66;">&#40;</span>glyph_tag<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;unicode=&quot;</span><span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">^</span><span style="color: #ff6666;">&quot;]*&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> outline <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>match<span style="color: #66cc66;">&#40;</span>glyph_tag<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;d=&quot;</span><span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">^</span><span style="color: #ff6666;">&quot;]*&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> width <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>match<span style="color: #66cc66;">&#40;</span>glyph_tag<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;horiz%-adv%-x=&quot;</span><span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">^</span><span style="color: #ff6666;">&quot;]*&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unicode <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #66cc66;">#</span>unicode <span style="color: #66cc66;">&gt;=</span> <span style="color: #cc66cc;">10</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unicode <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>unicode<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>unicode<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> outline <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #66cc66;">#</span>outline <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outline <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>outline<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>outline<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> width <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">and</span> <span style="color: #66cc66;">#</span>width <span style="color: #66cc66;">&gt;=</span> <span style="color: #cc66cc;">14</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>width<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">14</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>width<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> unicode <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; glyphs<span style="color: #66cc66;">&#91;</span>unicode<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span>width<span style="color: #66cc66;">,</span> outline<span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> glyphs<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- returns a random float number between the specified boundaries (floats)</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> random_in_interval<span style="color: #66cc66;">&#40;</span>lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">*</span> <span style="color: #66cc66;">&#40;</span>upper_boundary <span style="color: #66cc66;">-</span> lower_boundary<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">+</span> lower_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- note: scaling is applied before randomization</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> scale_and_randomize<span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> scale_factor<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> width <span style="color: #66cc66;">=</span> glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> outline <span style="color: #66cc66;">=</span> glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> previous_was_number <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> processed_outline <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> number <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> width <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width <span style="color: #66cc66;">=</span> width <span style="color: #66cc66;">*</span> scale_factor<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> outline <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>outline<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> char <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.sub</span><span style="color: #66cc66;">&#40;</span>outline<span style="color: #66cc66;">,</span> i<span style="color: #66cc66;">,</span> i<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> previous_was_number <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>match<span style="color: #66cc66;">&#40;</span>char<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">'%d'</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;.&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> number <span style="color: #66cc66;">..</span> char<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- scale and randomize</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> number <span style="color: #66cc66;">*</span> scale_factor<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> number <span style="color: #66cc66;">*</span> random_in_interval<span style="color: #66cc66;">&#40;</span>lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">string.format</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;%.3f&quot;</span><span style="color: #66cc66;">,</span> number<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; processed_outline <span style="color: #66cc66;">=</span> processed_outline <span style="color: #66cc66;">..</span> number <span style="color: #66cc66;">..</span> char<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; previous_was_number <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">string</span><span style="color: #66cc66;">.</span>match<span style="color: #66cc66;">&#40;</span>char<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">'%d'</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char <span style="color: #66cc66;">==</span> <span style="color: #ff6666;">&quot;-&quot;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number <span style="color: #66cc66;">=</span> number <span style="color: #66cc66;">..</span> char<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; previous_was_number <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">true</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; processed_outline <span style="color: #66cc66;">=</span> processed_outline <span style="color: #66cc66;">..</span> char<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; previous_was_number <span style="color: #66cc66;">=</span> <span style="color: #aa9900;">false</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #66cc66;">&#123;</span>width<span style="color: #66cc66;">,</span> processed_outline<span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> print_glyph<span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> scale_factor<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> randomized_glyph <span style="color: #66cc66;">=</span> scale_and_randomize<span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> scale_factor<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> width <span style="color: #66cc66;">=</span> randomized_glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> outline <span style="color: #66cc66;">=</span> randomized_glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> outline <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>filldraw[glyph outline] svg &quot;</span><span style="color: #ff6666;">&quot; .. outline .. &quot;</span><span style="color: #ff6666;">&quot;;&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> return_glyph<span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> scale_factor<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> randomized_glyph <span style="color: #66cc66;">=</span> scale_and_randomize<span style="color: #66cc66;">&#40;</span>glyph<span style="color: #66cc66;">,</span> scale_factor<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> width <span style="color: #66cc66;">=</span> randomized_glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> outline <span style="color: #66cc66;">=</span> randomized_glyph<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> outline <span style="color: #66cc66;">~=</span> <span style="color: #aa9900;">nil</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>filldraw[glyph outline] svg &quot;</span><span style="color: #ff6666;">&quot; .. outline .. &quot;</span><span style="color: #ff6666;">&quot;;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_sample_glyphs<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, anchor=south west] (a1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;a&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.05</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, anchor=south west, right=7.5mm of a1] (a2) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;a&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.05</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.8</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1.2</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_sample_text<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> horizontal_space <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;0.5mm&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> vertical_space <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;1.25mm&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> scale <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.05</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> lower_boundary <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0.9</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> upper_boundary <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1.1</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix] (m1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;m&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of m1] (a1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;a&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of a1] (t1) {&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>raisebox{&quot;</span> <span style="color: #66cc66;">..</span> vertical_space <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;t&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;}&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of t1] (h1) {&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>raisebox{&quot;</span> <span style="color: #66cc66;">..</span> vertical_space <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;h&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;}&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of h1] (e1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;e&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of e1] (m2) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;m&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of m2] (a2) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;a&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of a2] (t2) {&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>raisebox{&quot;</span> <span style="color: #66cc66;">..</span> vertical_space <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;t&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;}&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of t2] (i1) {&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>raisebox{&quot;</span> <span style="color: #66cc66;">..</span> vertical_space <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;i&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;}&quot;</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of i1] (c1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;c&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>node[glyph node, matrix, right=&quot;</span> <span style="color: #66cc66;">..</span> horizontal_space <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot; of c1] (s1) {&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;s&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> scale<span style="color: #66cc66;">,</span> lower_boundary<span style="color: #66cc66;">,</span> upper_boundary<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_sample_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; print_glyph<span style="color: #66cc66;">&#40;</span>glyphs<span style="color: #66cc66;">&#91;</span><span style="color: #ff6666;">&quot;&amp;#x3a9;&quot;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.05</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.95</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1.05</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> main<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cmr10_glyphs <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">math.randomseed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000aa;">os.time</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; cmr10_glyphs <span style="color: #66cc66;">=</span> read_font_data<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;cmr10.svg&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>noindent&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_sample_glyphs<span style="color: #66cc66;">&#40;</span>cmr10_glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>[2cm]&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_sample_text<span style="color: #66cc66;">&#40;</span>cmr10_glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span><span style="color: #000099; font-weight: bold;">\\</span>[2cm]&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_sample_glyph<span style="color: #66cc66;">&#40;</span>cmr10_glyphs<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span><br />
\luadirect<span style="color: #66cc66;">&#123;</span>main<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#125;</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span></div></td></tr></tbody></table></div>
</blockquote>
<p>Nice, isn&#8217;t it?</p>
<p>I&#8217;ve created an animation in LaTeX (clarification later) using this code, which  makes the letter &ldquo;a&rdquo; wibbly-wobbly. There is also a video which shows the same letter but only the outline is drawn, but in my opinion it doesn&#8217;t look that good: <a href="https://www.youtube.com/watch?v=ysNP5T-SeJE">Glyph distortion &#8211; YouTube</a>.</p>
<p><iframe width="705" height="397" src="//www.youtube.com/embed/qd7i83b6DjI?rel=0" frameborder="0" allowfullscreen></iframe></p>
<p>These videos are also available on Vimeo: <a href="https://vimeo.com/104436884" title="Glyph distortion on Vimeo">Glyph distortion on Vimeo</a>, <a href="https://vimeo.com/104437031" title="Glyph distortion #2 on Vimeo">Glyph distortion #2 on Vimeo</a>.</p>
<p>The second animation (also made in LaTeX) draws a big letter &ldquo;a&rdquo; stacking only outlines of it on top of each other which it gives a hollow like look.</p>
<p><iframe width="705" height="397" src="//www.youtube.com/embed/eTM3fKI5W6Y?rel=0" frameborder="0" allowfullscreen></iframe></p>
<p>This video is also available on Vimeo: <a href="https://vimeo.com/104798780" title="Font outline animation #2 on Vimeo">Font outline animation #2 on Vimeo</a>.</p>
<p>Only one question remains, how did I made these animations in LaTeX? I just built upon the code above, and rendered a long PDF which&#8217;s each page is a frame of the animation. After that I only followed some steps <a href="http://sidenote.hu/2014/08/16/font-outline-animation/" title="Font outline animation / sidenote">I&#8217;ve described before</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Font outline animation</title>
		<link>http://sidenote.hu/2014/08/16/font-outline-animation/</link>
		<pubDate>Sat, 16 Aug 2014 16:26:29 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[animáció]]></category>
		<category><![CDATA[művészet, dizájn]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[tipográfia]]></category>
		<category><![CDATA[videó]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8571</guid>
		<description><![CDATA[The video is also available on Vimeo. This animation is strongly connected to LaTeX. How come? &#8211; you could ask. I&#8217;ll come to the point&#8230;]]></description>
				<content:encoded><![CDATA[<p><iframe width="705" height="397" src="//www.youtube.com/embed/NpCqjrXWzuQ?rel=0" frameborder="0" allowfullscreen></iframe></p>
<p>The video is also <a href="https://vimeo.com/103589608" title="Font outline animation on Vimeo">available on Vimeo</a>.</p>
<p>This animation is strongly connected to LaTeX. <em>How come?</em> &ndash; you could ask. I&#8217;ll come to the point but first I have to confess that this nice piece of video/animation/whatever is &ldquo;only&rdquo; a byproduct of a search for a LaTeX related answer.</p>
<p>I&#8217;m a LaTeX enthusiast, and I&#8217;m trying to be active on <a href="http://tex.stackexchange.com/" title="TeX - LaTeX Stack Exchange">TeX.SX</a>, and found a question about <a href="http://tex.stackexchange.com/questions/161920/randomized-drawing-of-individual-glyphs" title="typography - Randomized drawing of individual glyphs - TeX - LaTeX Stack Exchange">how to draw individual glyphs with randomized paths</a> which I could not stop thinking about. I even wanted to learn Metapost, but when I saw what was laying before me I was intimidated. So I thought I should try something easier first, namely Processing, which was very useful for some small projects in the past. I found the <a href="http://www.ricardmarxer.com/geomerative/" title="Geomerative">Geomerative library</a> written by Ricard Marxer, and when I was looking into the examples which came with the library I found an interesting one, which used the vertices of font outlines. Then came the idea that it would be nice to try to polygonize individual glyphs with different accuracy, draw Bézier curves along/through the vertices, and stack these images on top each other. Just to see how it looks. In the end it turned out to be pretty awesome, I think.</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2014/08/font_outline_animation_frame.png"><img src="http://sidenote.hu/wp-content/uploads/2014/08/font_outline_animation_frame-705x396.png" alt="Font outline animation" width="705" height="396" class="alignnone size-large wp-image-8584" srcset="http://sidenote.hu/wp-content/uploads/2014/08/font_outline_animation_frame-705x396.png 705w, http://sidenote.hu/wp-content/uploads/2014/08/font_outline_animation_frame-225x126.png 225w, http://sidenote.hu/wp-content/uploads/2014/08/font_outline_animation_frame-350x196.png 350w" sizes="(max-width: 705px) 100vw, 705px" /></a></p>
<p>I&#8217;m sharing the source with some notes what and how it does what it does, so others may come up with nice things too. But if you don&#8217;t want the &ldquo;magic&rdquo; to be debunked, this is where you should stop reading this post.</p>
<p><em>Note that the following source code comes with no warranty at all, and is under the <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" title="Creative Commons &mdash; Attribution-NonCommercial-ShareAlike 2.5 Generic &ndash; CC BY-NC-SA 2.5">CC BY-NC-SA 2.5 license</a>.</em></p>
<div class="codecolorer-container java dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br /></div></td><td><div class="java codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #666666; font-style: italic;">/*<br />
Font outline animation<br />
Author: István Szántai (szantaii)<br />
License: CC BY-NC-SA 2.5<br />
*/</span><br />
<span style="color: #000000; font-weight: bold;">import</span> <span style="color: #006699;">geomerative.*</span><span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">import</span> <span style="color: #006699;">processing.pdf.*</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000066; font-weight: bold;">int</span> frameCount<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">float</span> backgroundColor<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">float</span> strokeColor<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">float</span> strokeOpacity<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">float</span> fadeOutOpacity<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">float</span> fadeOutOpacityStep<span style="color: #339933;">;</span><br />
RShape shape<span style="color: #339933;">;</span><br />
RPoint<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> points<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">int</span> initialPolygonizerLength<span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">int</span> currentPolygonizerLength<span style="color: #339933;">;</span><br />
<br />
<br />
<span style="color: #000066; font-weight: bold;">void</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; frameCount <span style="color: #339933;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">;</span><br />
&nbsp; backgroundColor <span style="color: #339933;">=</span> <span style="color: #cc66cc;">38.25</span><span style="color: #339933;">;</span><br />
&nbsp; strokeColor <span style="color: #339933;">=</span> <span style="color: #cc66cc;">229.5</span><span style="color: #339933;">;</span><br />
&nbsp; strokeOpacity <span style="color: #339933;">=</span> <span style="color: #cc66cc;">25.5</span><span style="color: #339933;">;</span><br />
&nbsp; fadeOutOpacityStep <span style="color: #339933;">=</span> <span style="color: #cc66cc;">10.625</span><span style="color: #339933;">;</span><br />
&nbsp; fadeOutOpacity <span style="color: #339933;">=</span> fadeOutOpacityStep<span style="color: #339933;">;</span> <br />
&nbsp; <br />
&nbsp; size<span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">1280</span>, <span style="color: #cc66cc;">720</span>, PDF, <span style="color: #0000ff;">&quot;frames.pdf&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; RG.<span style="color: #006633;">init</span><span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">this</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; initialPolygonizerLength <span style="color: #339933;">=</span> <span style="color: #cc66cc;">179</span><span style="color: #339933;">;</span><br />
&nbsp; currentPolygonizerLength <span style="color: #339933;">=</span> initialPolygonizerLength<span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; print<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Drawing...&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; smooth<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<br />
<span style="color: #000066; font-weight: bold;">void</span> draw<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; PGraphicsPDF pdf <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>PGraphicsPDF<span style="color: #009900;">&#41;</span> g<span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>frameCount <span style="color: #339933;">&lt;</span> <span style="color: #cc66cc;">45</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; background<span style="color: #009900;">&#40;</span>backgroundColor<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; pdf.<span style="color: #006633;">nextPage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>frameCount <span style="color: #339933;">&lt;</span> <span style="color: #cc66cc;">399</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; background<span style="color: #009900;">&#40;</span>backgroundColor<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; noFill<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; strokeCap<span style="color: #009900;">&#40;</span>ROUND<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; strokeJoin<span style="color: #009900;">&#40;</span>ROUND<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; stroke<span style="color: #009900;">&#40;</span>strokeColor, strokeOpacity<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; &nbsp; drawBezierVertices<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;A&quot;</span>, width <span style="color: #339933;">/</span> <span style="color: #cc66cc;">2</span> <span style="color: #339933;">-</span> <span style="color: #cc66cc;">180</span>, <span style="color: #cc66cc;">4.95</span> <span style="color: #339933;">*</span> height <span style="color: #339933;">/</span> <span style="color: #cc66cc;">6</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; drawBezierVertices<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;a&quot;</span>, width <span style="color: #339933;">/</span> <span style="color: #cc66cc;">2</span> <span style="color: #339933;">+</span> <span style="color: #cc66cc;">230</span>, <span style="color: #cc66cc;">4.95</span> <span style="color: #339933;">*</span> height <span style="color: #339933;">/</span> <span style="color: #cc66cc;">6</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>currentPolygonizerLength <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">--</span>currentPolygonizerLength<span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>frameCount <span style="color: #339933;">&gt;=</span> <span style="color: #cc66cc;">375</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; noStroke<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fill<span style="color: #009900;">&#40;</span>backgroundColor, fadeOutOpacity<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; rect<span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">0</span>, <span style="color: #cc66cc;">0</span>, <span style="color: #cc66cc;">1280</span>, <span style="color: #cc66cc;">720</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fadeOutOpacity <span style="color: #339933;">+=</span> fadeOutOpacityStep<span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; pdf.<span style="color: #006633;">nextPage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>frameCount <span style="color: #339933;">&lt;</span> <span style="color: #cc66cc;">429</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; background<span style="color: #009900;">&#40;</span>backgroundColor<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>frameCount <span style="color: #339933;">!=</span> <span style="color: #cc66cc;">428</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; pdf.<span style="color: #006633;">nextPage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">else</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; println<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot; done.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; exit<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <br />
&nbsp; frameCount<span style="color: #339933;">++;</span><br />
<span style="color: #009900;">&#125;</span><br />
<br />
<span style="color: #000066; font-weight: bold;">void</span> drawBezierVertices<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> text, <span style="color: #000066; font-weight: bold;">float</span> horizontalPos, <span style="color: #000066; font-weight: bold;">float</span> verticalPos<span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; shape <span style="color: #339933;">=</span> RG.<span style="color: #006633;">getText</span><span style="color: #009900;">&#40;</span>text, <span style="color: #0000ff;">&quot;Palatino-Roman.ttf&quot;</span>, <span style="color: #cc66cc;">650</span>, CENTER<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; pushMatrix<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; translate<span style="color: #009900;">&#40;</span>horizontalPos, verticalPos<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #000000; font-weight: bold;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">int</span> i <span style="color: #339933;">=</span> initialPolygonizerLength<span style="color: #339933;">;</span> i <span style="color: #339933;">&gt;=</span> currentPolygonizerLength<span style="color: #339933;">;</span> i<span style="color: #339933;">--</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; RG.<span style="color: #006633;">setPolygonizer</span><span style="color: #009900;">&#40;</span>RG.<span style="color: #006633;">UNIFORMLENGTH</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; RG.<span style="color: #006633;">setPolygonizerLength</span><span style="color: #009900;">&#40;</span>i<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; points <span style="color: #339933;">=</span> shape.<span style="color: #006633;">getPoints</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">if</span><span style="color: #009900;">&#40;</span>points <span style="color: #339933;">!=</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #339933;">&amp;&amp;</span> points.<span style="color: #006633;">length</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; beginShape<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">for</span><span style="color: #009900;">&#40;</span><span style="color: #000066; font-weight: bold;">int</span> j <span style="color: #339933;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">;</span> j <span style="color: #339933;">&lt;</span> points.<span style="color: #006633;">length</span> <span style="color: #339933;">-</span> <span style="color: #cc66cc;">3</span><span style="color: #339933;">;</span> j<span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>j <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vertex<span style="color: #009900;">&#40;</span>points<span style="color: #009900;">&#91;</span>j<span style="color: #009900;">&#93;</span>.<span style="color: #006633;">x</span>, points<span style="color: #009900;">&#91;</span>j<span style="color: #009900;">&#93;</span>.<span style="color: #006633;">y</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bezierVertex<span style="color: #009900;">&#40;</span>points<span style="color: #009900;">&#91;</span>j<span style="color: #009900;">&#93;</span>.<span style="color: #006633;">x</span>, points<span style="color: #009900;">&#91;</span>j<span style="color: #009900;">&#93;</span>.<span style="color: #006633;">y</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; points<span style="color: #009900;">&#91;</span>j <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span>.<span style="color: #006633;">x</span>, points<span style="color: #009900;">&#91;</span>j <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span>.<span style="color: #006633;">y</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; points<span style="color: #009900;">&#91;</span>j <span style="color: #339933;">+</span> <span style="color: #cc66cc;">2</span><span style="color: #009900;">&#93;</span>.<span style="color: #006633;">x</span>, points<span style="color: #009900;">&#91;</span>j <span style="color: #339933;">+</span> <span style="color: #cc66cc;">2</span><span style="color: #009900;">&#93;</span>.<span style="color: #006633;">y</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; endShape<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; popMatrix<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></td></tr></tbody></table></div>
<p>The most important stuff is in the definition of the <code class="codecolorer text dawn"><span class="text">drawBezierVertices</span></code> function. This is how it works. It gets a piece of text, which will be &ldquo;written&rdquo; with a defined font (note that the chosen font should be in the project&#8217;s data folder) making a shape, but it won&#8217;t be drawn to the screen. Instead the shape will be polygonized and through the calculated vertices a bezier curve will be drawn. This is iterated a couple times (180 times in this specific example) while vertices are getting closer to each other, so at the end a the true outline of the font would be drawn (more or less).</p>
<p>By reading the source you can also see that every frame of the animation is rendered to pages of a PDF document. Here is why. When rendering to PDF Processing will create a vectorized output. So in the end you can get the frames from the PDF in any resolution you want without losing quality. All is left to rasterize every page of the rendered PDF with the desired resolution into individual raster images (PNG files if you ask me), and make a video from the created image sequence.</p>
<p>Some practical advice. I&#8217;ve used Gimp to rasterize the pages of the PDF output (with FullHD, 1920&times;1080 resolution), and saved them as separate files using the <a href="http://registry.gimp.org/node/28268" title="Export Layers | GIMP Plugin Registry">Export Layers plugin</a>. After that I made the image sequence into a video from the command-line using <a href="https://www.ffmpeg.org/" title="FFmpeg">FFmpeg</a>.</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #c20cb9; font-weight: bold;">ffmpeg</span> <span style="color: #660033;">-r</span> <span style="color: #000000;">30</span> <span style="color: #660033;">-i</span> <span style="color: #000000; font-weight: bold;">%</span>03d.png -c:v libx264 <span style="color: #660033;">-preset</span> veryslow <span style="color: #660033;">-qp</span> <span style="color: #000000;">0</span> <span style="color: #660033;">-g</span> <span style="color: #000000;">1</span> <span style="color: #660033;">-bf</span> <span style="color: #000000;">2</span> font_animation.mp4</div></div>
]]></content:encoded>
			</item>
		<item>
		<title>Creeper</title>
		<link>http://sidenote.hu/2014/08/03/creeper/</link>
		<pubDate>Sun, 03 Aug 2014 16:17:06 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[játék]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[indie]]></category>
		<category><![CDATA[rajz]]></category>
		<category><![CDATA[TeX/LaTeX]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8559</guid>
		<description><![CDATA[As a follow-up for my last post hereby I present a Creeper (right) in (Lua)LaTeX. &#160; Image source (left): File:Creeper.png &#8211; Minecraft Wiki 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247% Creeper&#8230;]]></description>
				<content:encoded><![CDATA[<p>As a follow-up for <a href="http://sidenote.hu/2014/07/20/drawing-an-enderman-in-latex/" title="Drawing an Enderman in LaTeX / sidenote">my last post</a> hereby I present a Creeper (right) in (Lua)LaTeX.</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2014/08/creeper_minecraft_wiki.png"><img src="http://sidenote.hu/wp-content/uploads/2014/08/creeper_minecraft_wiki-350x713.png" alt="Creeper" width="350" height="713" class="alignnone size-medium wp-image-8561" srcset="http://sidenote.hu/wp-content/uploads/2014/08/creeper_minecraft_wiki-350x713.png 350w, http://sidenote.hu/wp-content/uploads/2014/08/creeper_minecraft_wiki-225x458.png 225w, http://sidenote.hu/wp-content/uploads/2014/08/creeper_minecraft_wiki.png 454w" sizes="(max-width: 350px) 100vw, 350px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2014/08/creeper_lualatex.png"><img src="http://sidenote.hu/wp-content/uploads/2014/08/creeper_lualatex-350x713.png" alt="Creeper" width="350" height="713" class="alignnone size-medium wp-image-8562" srcset="http://sidenote.hu/wp-content/uploads/2014/08/creeper_lualatex-350x713.png 350w, http://sidenote.hu/wp-content/uploads/2014/08/creeper_lualatex-225x458.png 225w, http://sidenote.hu/wp-content/uploads/2014/08/creeper_lualatex.png 560w" sizes="(max-width: 350px) 100vw, 350px" /></a></p>
<p>Image source (left): <a href="http://minecraft.gamepedia.com/File:Creeper.png?version=25b0548e8cfe5c9fa2ea53cc54101eb3" title="File:Creeper.png - Minecraft Wiki">File:Creeper.png &#8211; Minecraft Wiki</a></p>
<div class="codecolorer-container lua dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br />232<br />233<br />234<br />235<br />236<br />237<br />238<br />239<br />240<br />241<br />242<br />243<br />244<br />245<br />246<br />247<br /></div></td><td><div class="lua codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #66cc66;">%</span> Creeper<br />
<span style="color: #66cc66;">%</span> Author<span style="color: #66cc66;">:</span> István Szántai <span style="color: #66cc66;">&#40;</span>szantaii<span style="color: #66cc66;">&#41;</span><br />
\documentclass<span style="color: #66cc66;">&#123;</span>article<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>xcolor<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">&#125;</span><br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">-</span>3dplot<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#91;</span>active<span style="color: #66cc66;">,</span> tightpage<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#123;</span>preview<span style="color: #66cc66;">&#125;</span><br />
\PreviewEnvironment<span style="color: #66cc66;">&#123;</span>tikzpicture<span style="color: #66cc66;">&#125;</span><br />
\setlength<span style="color: #66cc66;">&#123;</span>\PreviewBorder<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>1cm<span style="color: #66cc66;">&#125;</span><br />
<br />
\definecolor<span style="color: #66cc66;">&#123;</span>creeper_white<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>9AD78E<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>creeper_lightgreen<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>5ED04C<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>creeper_green<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>00A500<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>creeper_darkgreen<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">255522</span><span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_coordinate_system<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(3,0,0) node[text=white!50!gray,anchor=north east]{$x$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,3,0) node[text=white!50!gray,anchor=west]{$y$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,0,3) node[text=white!50!gray,anchor=south]{$z$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> matrix_scalar_multiplication<span style="color: #66cc66;">&#40;</span>matrix<span style="color: #66cc66;">,</span> scalar<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tmp_matrix <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">*</span> scalar<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> tmp_matrix<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> shift_coordinates<span style="color: #66cc66;">&#40;</span>matrix<span style="color: #66cc66;">,</span> array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> matrix_rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> matrix_cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> array_length <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>array<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tmp_matrix <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> matrix_cols <span style="color: #66cc66;">==</span> array_length <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> matrix_rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> matrix_cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">+</span> array<span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> tmp_matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_1 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_2 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_3 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_4 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_5 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_6 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cube_sides <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span>side_1<span style="color: #66cc66;">,</span> side_2<span style="color: #66cc66;">,</span> side_3<span style="color: #66cc66;">,</span> side_4<span style="color: #66cc66;">,</span> side_5<span style="color: #66cc66;">,</span> side_6<span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tex_cube <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>cube_sides <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;] &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side <span style="color: #66cc66;">=</span> matrix_scalar_multiplication<span style="color: #66cc66;">&#40;</span>cube_sides<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.5</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_side <span style="color: #66cc66;">=</span> shift_coordinates<span style="color: #66cc66;">&#40;</span>current_side<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">&#123;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side_rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>current_side<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side_cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>current_side<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> current_side_rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> k <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> current_side_cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> k <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;(&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> current_side<span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>k<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> k <span style="color: #66cc66;">~=</span> current_side_cols <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span>tex_cube<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_head<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color_index <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>colors_array <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#91;</span>color_index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">&gt;</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&lt;</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;black&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">&gt;</span> y_pos <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&lt;</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">&gt;</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&lt;</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">#</span>colors_array<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_leg<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color_index <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>colors_array <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#91;</span>color_index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">#</span>colors_array<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">3</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;black&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_bodypart<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">,</span> x_length<span style="color: #66cc66;">,</span> y_length<span style="color: #66cc66;">,</span> z_length<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color_index <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>colors_array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> colors_array<span style="color: #66cc66;">&#91;</span>color_index<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_creeper<span style="color: #66cc66;">&#40;</span>x_rotation<span style="color: #66cc66;">,</span> z_rotation<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> creeper_colors <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #ff6666;">&quot;creeper_white&quot;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;creeper_lightgreen&quot;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;creeper_green&quot;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;creeper_darkgreen&quot;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>tdplotsetmaincoords{&quot;</span> <span style="color: #66cc66;">..</span> x_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> z_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}[tdplot_main_coords]&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">math.randomseed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000aa;">os.time</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_leg<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">18</span><span style="color: #66cc66;">,</span> creeper_colors<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_leg<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">6</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">18</span><span style="color: #66cc66;">,</span> creeper_colors<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">12</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">,</span> creeper_colors<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_head<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> creeper_colors<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- draw_coordinate_system()</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span><br />
\luadirect<span style="color: #66cc66;">&#123;</span>draw_creeper<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">66</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">135</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#125;</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span></div></td></tr></tbody></table></div>
]]></content:encoded>
			</item>
		<item>
		<title>Drawing an Enderman in LaTeX</title>
		<link>http://sidenote.hu/2014/07/20/drawing-an-enderman-in-latex/</link>
		<comments>http://sidenote.hu/2014/07/20/drawing-an-enderman-in-latex/#comments</comments>
		<pubDate>Sun, 20 Jul 2014 07:53:46 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[játék]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[indie]]></category>
		<category><![CDATA[rajz]]></category>
		<category><![CDATA[TeX/LaTeX]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8535</guid>
		<description><![CDATA[In the last couple of months I&#8217;ve watched some videos of Achievement Hunter&#8217;s Let&#8217;s Play Minecraft videos where were some encounters with Endermen. I was&#8230;]]></description>
				<content:encoded><![CDATA[<p>In the last couple of months I&#8217;ve watched some videos of Achievement Hunter&#8217;s <a href="https://www.youtube.com/playlist?list=PL1cXh4tWqmsEQPeLEJ5V3k5knt-X9k043" title="Let's Play Minecraft - YouTube">Let&#8217;s Play Minecraft</a> videos where were some encounters with <a href="http://minecraft.gamepedia.com/Enderman" title="Enderman - Minecraft Wiki">Endermen</a>. I was really fascinated by these creatures since they can teleport, demand respect, mysterious, etc.</p>
<p>I have been &ldquo;playing&rdquo; with LaTeX, especially with LuaTeX, recently, and I wanted to make a 3D-like picture. So I have chosen <a href="http://www.ctan.org/pkg/tikz-3dplot" title="CTAN: Package tikz-3dplot"><code class="codecolorer text dawn"><span class="text">tikz‑3dplot</span></code></a> and LuaTeX to draw an Enderman. (I think this is totally drawable with pure TikZ (syntax), therefore compilable with <code class="codecolorer text dawn"><span class="text">pdflatex</span></code>, etc., but I found making this using LuaTeX much more simple.)</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2014/07/enderman_from_wiki.png"><img src="http://sidenote.hu/wp-content/uploads/2014/07/enderman_from_wiki-350x569.png" alt="Enderman" width="350" height="569" class="alignnone size-medium wp-image-8537" srcset="http://sidenote.hu/wp-content/uploads/2014/07/enderman_from_wiki-350x569.png 350w, http://sidenote.hu/wp-content/uploads/2014/07/enderman_from_wiki-225x366.png 225w, http://sidenote.hu/wp-content/uploads/2014/07/enderman_from_wiki.png 629w" sizes="(max-width: 350px) 100vw, 350px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2014/07/enderman_luatex.png"><img src="http://sidenote.hu/wp-content/uploads/2014/07/enderman_luatex-350x630.png" alt="Enderman" width="350" height="630" class="alignnone size-medium wp-image-8538" srcset="http://sidenote.hu/wp-content/uploads/2014/07/enderman_luatex-350x630.png 350w, http://sidenote.hu/wp-content/uploads/2014/07/enderman_luatex-225x405.png 225w, http://sidenote.hu/wp-content/uploads/2014/07/enderman_luatex.png 556w" sizes="(max-width: 350px) 100vw, 350px" /></a></p>
<p>Image source (left): <a href="http://minecraft.gamepedia.com/File:Enderman_normal.png" title="File:Enderman normal.png - Minecraft Wiki">File:Enderman normal.png &#8211; Minecraft Wiki</a></p>
<p>My drawing (right) is not accurate by many aspects, but I&#8217;ve achieved what I wanted.</p>
<div class="codecolorer-container lua dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br /></div></td><td><div class="lua codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #66cc66;">%</span> Enderman<br />
<span style="color: #66cc66;">%</span> Author<span style="color: #66cc66;">:</span> István Szántai <span style="color: #66cc66;">&#40;</span>szantaii<span style="color: #66cc66;">&#41;</span><br />
\documentclass<span style="color: #66cc66;">&#123;</span>article<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>xcolor<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">&#125;</span><br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">-</span>3dplot<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#91;</span>active<span style="color: #66cc66;">,</span> tightpage<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#123;</span>preview<span style="color: #66cc66;">&#125;</span><br />
\PreviewEnvironment<span style="color: #66cc66;">&#123;</span>tikzpicture<span style="color: #66cc66;">&#125;</span><br />
\setlength<span style="color: #66cc66;">&#123;</span>\PreviewBorder<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>1cm<span style="color: #66cc66;">&#125;</span><br />
<br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanblack<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">000000</span><span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermangray<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">161616</span><span style="color: #66cc66;">&#125;</span><br />
<span style="color: #66cc66;">%</span>\definecolor<span style="color: #66cc66;">&#123;</span>endermanpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>CC00FA<span style="color: #66cc66;">&#125;</span><br />
<span style="color: #66cc66;">%</span>\definecolor<span style="color: #66cc66;">&#123;</span>endermanlightpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>E079FA<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>FF9EFF<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanlightpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>FFC9FF<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>particlecolor<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>DF4AF8<span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_coordinate_system<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(3,0,0) node[text=white!50!gray,anchor=north east]{$x$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,3,0) node[text=white!50!gray,anchor=west]{$y$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,0,3) node[text=white!50!gray,anchor=south]{$z$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">--[[<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (0.5, 0.5, -0.5) -- (-0.5, 0.5, -0.5) -- (-0.5, -0.5, -0.5) -- (0.5, -0.5, -0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (-0.5, 0.5, -0.5) -- (-0.5, 0.5, 0.5) -- (-0.5, -0.5, 0.5) -- (-0.5, -0.5, -0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (-0.5, -0.5, -0.5) -- (0.5, -0.5, -0.5) -- (0.5, -0.5, 0.5) -- (-0.5, -0.5, 0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (0.5, 0.5, -0.5) -- (-0.5, 0.5, -0.5) -- (-0.5, 0.5, 0.5) -- (0.5, 0.5, 0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (0.5, -0.5, -0.5) -- (0.5, 0.5, -0.5) -- (0.5, 0.5, 0.5) -- (0.5, -0.5, 0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; \draw[fill=red] (0.5, 0.5, 0.5) -- (-0.5, 0.5, 0.5) -- (-0.5, -0.5, 0.5) -- (0.5, -0.5, 0.5) -- cycle;<br />
&nbsp; &nbsp; &nbsp; &nbsp; ]]</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cube <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; cube <span style="color: #66cc66;">=</span> cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;]&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(-0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0.5 + &quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, -0.5 + &quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, 0.5 + &quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span>cube<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_head<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #66cc66;">&#40;</span>x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">not</span> <span style="color: #66cc66;">&#40;</span>x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&gt;</span> y_pos <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&lt;</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span> z <span style="color: #66cc66;">==</span> z_pos<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;endermanlightpurple&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;endermanpurple&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&lt;</span> <span style="color: #cc66cc;">6</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermangray&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermanblack&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_bodypart<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">,</span> x_length<span style="color: #66cc66;">,</span> y_length<span style="color: #66cc66;">,</span> z_length<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&lt;</span> <span style="color: #cc66cc;">6</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermangray&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermanblack&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_particles<span style="color: #66cc66;">&#40;</span>x_min<span style="color: #66cc66;">,</span> x_max<span style="color: #66cc66;">,</span> y_min<span style="color: #66cc66;">,</span> y_max<span style="color: #66cc66;">,</span> z_min<span style="color: #66cc66;">,</span> z_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> y<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> z<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> black_amount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_size<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_scale<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_count <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">40</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> particle_count<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>x_min<span style="color: #66cc66;">,</span> x_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>y_min<span style="color: #66cc66;">,</span> y_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>z_min<span style="color: #66cc66;">,</span> z_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_size <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_scale <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">20</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">/</span> <span style="color: #cc66cc;">100</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; black_amount <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">25</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>tdplottransformmainscreen{&quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>j <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> i <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>filldraw[black!&quot;</span> <span style="color: #66cc66;">..</span> black_amount <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;!particlecolor, tdplot_screen_coords] (&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i <span style="color: #66cc66;">*</span> particle_scale <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">0.25</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;+<span style="color: #000099; font-weight: bold;">\\</span>tdplotresx, &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j <span style="color: #66cc66;">*</span> particle_scale <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">0.25</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;+<span style="color: #000099; font-weight: bold;">\\</span>tdplotresy) &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;rectangle +(&quot;</span> <span style="color: #66cc66;">..</span> particle_scale <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;*0.25, &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_scale <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;*0.25);&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span>particle<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_enderman<span style="color: #66cc66;">&#40;</span>x_rotation<span style="color: #66cc66;">,</span> z_rotation<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>tdplotsetmaincoords{&quot;</span> <span style="color: #66cc66;">..</span> x_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> z_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}[tdplot_main_coords]&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">math.randomseed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000aa;">os.time</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- right arm</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">42</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- right leg</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">42</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- left leg</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">12</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- body</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span><span style="color: #808080; font-style: italic;">-- left arm</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_head<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- head</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_particles<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">44</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- draw_coordinate_system()</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span><br />
\luadirect<span style="color: #66cc66;">&#123;</span>draw_enderman<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">70</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">130</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#125;</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span></div></td></tr></tbody></table></div>
<p>Copy the code, save with UTF-8 (without BOM) encoding, and compile using <code class="codecolorer text dawn"><span class="text">lualatex</span></code>.</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;">lualatex filename.tex</div></div>
<h3>Update ~16:00 CEST on 21 July 2014:</h3>
<p>Yesterday I&#8217;ve sent in this code as an example for <a href="http://www.texample.net/" title="TeXample.net – ample resources for TeX users">TeXample.net</a>. I got an answer from the site maintainer including a small improvement suggestion, namely that I should try algorithmize the drawing of a single (TikZ) cube (instead of concatenating a bunch of strings and make the TeX engine do the calculations). So I did, see the code below. (More details below the code.)</p>
<div class="codecolorer-container lua dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br />161<br />162<br />163<br />164<br />165<br />166<br />167<br />168<br />169<br />170<br />171<br />172<br />173<br />174<br />175<br />176<br />177<br />178<br />179<br />180<br />181<br />182<br />183<br />184<br />185<br />186<br />187<br />188<br />189<br />190<br />191<br />192<br />193<br />194<br />195<br />196<br />197<br />198<br />199<br />200<br />201<br />202<br />203<br />204<br />205<br />206<br />207<br />208<br />209<br />210<br />211<br />212<br />213<br />214<br />215<br />216<br />217<br />218<br />219<br />220<br />221<br />222<br />223<br />224<br />225<br />226<br />227<br />228<br />229<br />230<br />231<br />232<br />233<br />234<br />235<br />236<br />237<br />238<br />239<br />240<br />241<br />242<br />243<br />244<br />245<br />246<br />247<br />248<br />249<br />250<br /></div></td><td><div class="lua codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #66cc66;">%</span> Enderman<br />
<span style="color: #66cc66;">%</span> Author<span style="color: #66cc66;">:</span> István Szántai <span style="color: #66cc66;">&#40;</span>szantaii<span style="color: #66cc66;">&#41;</span><br />
\documentclass<span style="color: #66cc66;">&#123;</span>article<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>xcolor<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">&#125;</span><br />
\usepackage<span style="color: #66cc66;">&#123;</span>tikz<span style="color: #66cc66;">-</span>3dplot<span style="color: #66cc66;">&#125;</span><br />
<br />
\usepackage<span style="color: #66cc66;">&#91;</span>active<span style="color: #66cc66;">,</span> tightpage<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#123;</span>preview<span style="color: #66cc66;">&#125;</span><br />
\PreviewEnvironment<span style="color: #66cc66;">&#123;</span>tikzpicture<span style="color: #66cc66;">&#125;</span><br />
\setlength<span style="color: #66cc66;">&#123;</span>\PreviewBorder<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>1cm<span style="color: #66cc66;">&#125;</span><br />
<br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanblack<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">000000</span><span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermangray<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">161616</span><span style="color: #66cc66;">&#125;</span><br />
<span style="color: #66cc66;">%</span>\definecolor<span style="color: #66cc66;">&#123;</span>endermanpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>CC00FA<span style="color: #66cc66;">&#125;</span><br />
<span style="color: #66cc66;">%</span>\definecolor<span style="color: #66cc66;">&#123;</span>endermanlightpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>E079FA<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>FF9EFF<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>endermanlightpurple<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>FFC9FF<span style="color: #66cc66;">&#125;</span><br />
\definecolor<span style="color: #66cc66;">&#123;</span>particlecolor<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>HTML<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#123;</span>DF4AF8<span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_coordinate_system<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(3,0,0) node[text=white!50!gray,anchor=north east]{$x$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,3,0) node[text=white!50!gray,anchor=west]{$y$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[white!50!gray,thick,-&gt;] (0,0,0) -- &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;(0,0,3) node[text=white!50!gray,anchor=south]{$z$};&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> matrix_scalar_multiplication<span style="color: #66cc66;">&#40;</span>matrix<span style="color: #66cc66;">,</span> scalar<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tmp_matrix <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">*</span> scalar<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> tmp_matrix<br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> shift_coordinates<span style="color: #66cc66;">&#40;</span>matrix<span style="color: #66cc66;">,</span> array<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> matrix_rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> matrix_cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>matrix<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> array_length <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>array<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tmp_matrix <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> matrix_cols <span style="color: #66cc66;">==</span> array_length <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> matrix_rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> matrix_cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp_matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> matrix<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">+</span> array<span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> tmp_matrix<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">return</span> <span style="color: #aa9900;">nil</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_1 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_2 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_3 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_4 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_5 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> side_6 <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#123;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> cube_sides <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#123;</span>side_1<span style="color: #66cc66;">,</span> side_2<span style="color: #66cc66;">,</span> side_3<span style="color: #66cc66;">,</span> side_4<span style="color: #66cc66;">,</span> side_5<span style="color: #66cc66;">,</span> side_6<span style="color: #66cc66;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> tex_cube <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">#</span>cube_sides <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>draw[ultra thin, fill=&quot;</span> <span style="color: #66cc66;">..</span> color <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;] &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side <span style="color: #66cc66;">=</span> matrix_scalar_multiplication<span style="color: #66cc66;">&#40;</span>cube_sides<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0.5</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; current_side <span style="color: #66cc66;">=</span> shift_coordinates<span style="color: #66cc66;">&#40;</span>current_side<span style="color: #66cc66;">,</span> <span style="color: #66cc66;">&#123;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">&#125;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side_rows <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>current_side<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> current_side_cols <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">#</span>current_side<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> current_side_rows <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> k <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> current_side_cols <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> k <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;(&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> current_side<span style="color: #66cc66;">&#91;</span>j<span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span>k<span style="color: #66cc66;">&#93;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> k <span style="color: #66cc66;">~=</span> current_side_cols <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;, &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;) -- &quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex_cube <span style="color: #66cc66;">=</span> tex_cube <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;cycle;&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span>tex_cube<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_head<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #66cc66;">&#40;</span>x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">not</span> <span style="color: #66cc66;">&#40;</span>x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&gt;</span> y_pos <span style="color: #aa9900; font-weight: bold;">and</span> y <span style="color: #66cc66;">&lt;</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span> z <span style="color: #66cc66;">==</span> z_pos<span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">5</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;endermanlightpurple&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">elseif</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">7</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">6</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> <span style="color: #cc66cc;">2</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> <span style="color: #ff6666;">&quot;endermanpurple&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&lt;</span> <span style="color: #cc66cc;">6</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermangray&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermanblack&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_bodypart<span style="color: #66cc66;">&#40;</span>x_pos<span style="color: #66cc66;">,</span> y_pos<span style="color: #66cc66;">,</span> z_pos<span style="color: #66cc66;">,</span> x_length<span style="color: #66cc66;">,</span> y_length<span style="color: #66cc66;">,</span> z_length<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> color<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> x <span style="color: #66cc66;">=</span> x_pos<span style="color: #66cc66;">,</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> y <span style="color: #66cc66;">=</span> y_pos<span style="color: #66cc66;">,</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> z <span style="color: #66cc66;">=</span> z_pos<span style="color: #66cc66;">,</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #aa9900; font-weight: bold;">or</span> x <span style="color: #66cc66;">==</span> x_pos <span style="color: #66cc66;">+</span> x_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">==</span> y_pos <span style="color: #aa9900; font-weight: bold;">or</span> y <span style="color: #66cc66;">==</span> y_pos <span style="color: #66cc66;">+</span> y_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">or</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">==</span> z_pos <span style="color: #aa9900; font-weight: bold;">or</span> z <span style="color: #66cc66;">==</span> z_pos <span style="color: #66cc66;">+</span> z_length <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&lt;</span> <span style="color: #cc66cc;">6</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermangray&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; color <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;endermanblack&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tikzcube<span style="color: #66cc66;">&#40;</span>x<span style="color: #66cc66;">,</span> y<span style="color: #66cc66;">,</span> z<span style="color: #66cc66;">,</span> color<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_particles<span style="color: #66cc66;">&#40;</span>x_min<span style="color: #66cc66;">,</span> x_max<span style="color: #66cc66;">,</span> y_min<span style="color: #66cc66;">,</span> y_max<span style="color: #66cc66;">,</span> z_min<span style="color: #66cc66;">,</span> z_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> x<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> y<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> z<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> black_amount<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_size<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_scale<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle_count <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">40</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">local</span> particle<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> particle_count<span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>x_min<span style="color: #66cc66;">,</span> x_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; y <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>y_min<span style="color: #66cc66;">,</span> y_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span>z_min<span style="color: #66cc66;">,</span> z_max<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_size <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_scale <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">20</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">/</span> <span style="color: #cc66cc;">100</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; black_amount <span style="color: #66cc66;">=</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">25</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>tdplottransformmainscreen{&quot;</span> <span style="color: #66cc66;">..</span> x <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> y <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> z <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> i <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">for</span> j <span style="color: #66cc66;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">do</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">if</span> <span style="color: #0000aa;">math.random</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">==</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>j <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> i <span style="color: #66cc66;">~=</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">and</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#40;</span>i <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span> <span style="color: #aa9900; font-weight: bold;">and</span> j <span style="color: #66cc66;">~=</span> particle_size <span style="color: #66cc66;">-</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #aa9900; font-weight: bold;">then</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle <span style="color: #66cc66;">=</span> <span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>filldraw[black!&quot;</span> <span style="color: #66cc66;">..</span> black_amount <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;!particlecolor, tdplot_screen_coords] (&quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i <span style="color: #66cc66;">*</span> particle_scale <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">0.25</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;+<span style="color: #000099; font-weight: bold;">\\</span>tdplotresx, &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j <span style="color: #66cc66;">*</span> particle_scale <span style="color: #66cc66;">*</span> <span style="color: #cc66cc;">0.25</span> <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;+<span style="color: #000099; font-weight: bold;">\\</span>tdplotresy) &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff6666;">&quot;rectangle +(&quot;</span> <span style="color: #66cc66;">..</span> particle_scale <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;*0.25, &quot;</span> <span style="color: #66cc66;">..</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; particle_scale <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;*0.25);&quot;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span>particle<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">function</span> draw_enderman<span style="color: #66cc66;">&#40;</span>x_rotation<span style="color: #66cc66;">,</span> z_rotation<span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>tdplotsetmaincoords{&quot;</span> <span style="color: #66cc66;">..</span> x_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}{&quot;</span> <span style="color: #66cc66;">..</span> z_rotation <span style="color: #66cc66;">..</span> <span style="color: #ff6666;">&quot;}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>begin{tikzpicture}[tdplot_main_coords]&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000aa;">math.randomseed</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000aa;">os.time</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- right arm</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">42</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- right leg</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">5</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">42</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- left leg</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">12</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">4</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- body</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_bodypart<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">3</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">30</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">30</span><span style="color: #66cc66;">&#41;</span><span style="color: #808080; font-style: italic;">-- left arm</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_head<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span> <span style="color: #808080; font-style: italic;">-- head</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; draw_particles<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">-</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">,</span> <span style="color: #66cc66;">-</span><span style="color: #cc66cc;">44</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">-- draw_coordinate_system()</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex<span style="color: #66cc66;">.</span>sprint<span style="color: #66cc66;">&#40;</span><span style="color: #ff6666;">&quot;<span style="color: #000099; font-weight: bold;">\\</span>end{tikzpicture}&quot;</span><span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #aa9900; font-weight: bold;">end</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>luacode<span style="color: #66cc66;">*</span><span style="color: #66cc66;">&#125;</span><br />
<br />
\begin<span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span><br />
\luadirect<span style="color: #66cc66;">&#123;</span>draw_enderman<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">70</span><span style="color: #66cc66;">,</span> <span style="color: #cc66cc;">130</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#125;</span><br />
\<span style="color: #aa9900; font-weight: bold;">end</span><span style="color: #66cc66;">&#123;</span>document<span style="color: #66cc66;">&#125;</span></div></td></tr></tbody></table></div>
<p>I have added two new functions (<code class="codecolorer text dawn"><span class="text">matrix_scalar_multiplication</span></code>, <code class="codecolorer text dawn"><span class="text">shift_coordinates</span></code>), and rewrote the <code class="codecolorer text dawn"><span class="text">tikzcube</span></code> function, so now the LuaTeX engine makes all necessary calculations instead of the TeX (TikZ?) engine which is considerably slower. Let&#8217;s see the numbers.</p>
<p>I&#8217;ve measured the compilation time of the original and the improved code. I made 20&ndash;20 &ldquo;dry&rdquo; compilations (no previous <code class="codecolorer text dawn"><span class="text">aux</span></code>, <code class="codecolorer text dawn"><span class="text">log</span></code> or <code class="codecolorer text dawn"><span class="text">pdf</span></code> files). The average compilation time of the original code was 25.35&thinsp;seconds while the improved code&#8217;s average was only 18.30&thinsp;seconds. This means that the improved version is 25% faster than the previous one. Stefan, thanks for your suggestion!</p>
]]></content:encoded>
			<wfw:commentRss>http://sidenote.hu/2014/07/20/drawing-an-enderman-in-latex/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Programming Conway&#8217;s Game of Life in LaTeX</title>
		<link>http://sidenote.hu/2013/11/18/programming-conways-game-of-life-in-latex/</link>
		<pubDate>Mon, 18 Nov 2013 09:01:19 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[gizmó]]></category>
		<category><![CDATA[ismeretterjesztő]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[TeX/LaTeX]]></category>
		<category><![CDATA[tipográfia]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8500</guid>
		<description><![CDATA[The other day I thought about that it would be nice to program Conway&#8217;s Game of Life in LaTeX and create an animated PDF output.&#8230;]]></description>
				<content:encoded><![CDATA[<p>The other day I thought about that it would be nice to program <a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life" title="Conway's Game of Life - Wikipedia">Conway&#8217;s Game of Life</a> in LaTeX and create an animated PDF output. You could say that implementing the Game of Life is pretty easy. It is. But not in LaTeX, at least not for me. After using LaTeX for years I still find it hard to understand some codes and especially writing programs in &ldquo;pure LaTeX&rdquo;.</p>
<p>Since I use PGF/TikZ fairly often I decided to use <code class="codecolorer text dawn"><span class="text">pgfmath</span></code> for the implementation. Pretty soon I got stuck, I needed to assign values to array elements, and I didn&#8217;t know how to overcome this problem in LaTeX. So I decided to ask <a href="http://tex.stackexchange.com/questions/145319/programming-conways-game-of-life-in-latex" title="tikz pgf - Programming Conway&#39;s Game of Life in LaTeX - TeX - LaTeX Stack Exchange">a question on TeX.SX</a>. This is the point that things get interesting.</p>
<p>I asked a question with the title &ldquo;Assign value to array element (PGF/TikZ)&rdquo;, I also wrote that my aim was to program Conway&#8217;s Game of Life in LaTeX, and posted my initial code. Before long two answers came, and the question was renamed to &ldquo;Programming Conway&#8217;s Game of Life in LaTeX&rdquo;. The first answer <a href="http://tex.stackexchange.com/a/145331/8844">implemented the Game of Life in LaTeX</a>, the second <a href="http://tex.stackexchange.com/a/145336/8844">implemented it in LuaTeX</a>. I was stunned. Especially from the LaTeX implementation. I didn&#8217;t &ndash; and still don&#8217;t &ndash; understand the code. :) At the end I decided I should get acquainted with LuaTeX, and write <a href="http://tex.stackexchange.com/a/145463/8844">my own solution</a> in it:</p>
<p><img src="http://sidenote.hu/wp-content/uploads/2013/11/glider.gif" alt="Glider" width="250" height="250" class="alignnone size-full wp-image-8506" /></p>
<div class="codecolorer-container latex dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;height:400px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;text-align:center;color:#888888;background-color:#EEEEEE;border-right: 1px solid #9F9F9F;"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br />102<br />103<br />104<br />105<br />106<br />107<br />108<br />109<br />110<br />111<br />112<br />113<br />114<br />115<br />116<br />117<br />118<br />119<br />120<br />121<br />122<br />123<br />124<br />125<br />126<br />127<br />128<br />129<br />130<br />131<br />132<br />133<br />134<br />135<br />136<br />137<br />138<br />139<br />140<br />141<br />142<br />143<br />144<br />145<br />146<br />147<br />148<br />149<br />150<br />151<br />152<br />153<br />154<br />155<br />156<br />157<br />158<br />159<br />160<br /></div></td><td><div class="latex codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #E02020; ">\</span><span style="color: #800000;">documentclass</span><span style="color: #E02020; ">{</span><span style="color: #2020C0; font-weight: normal;">article<span style="color: #E02020; ">}</span><br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">a0paper</span><span style="color: #E02020; ">]{</span>geometry<span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">{</span>luacode<span style="color: #E02020; ">}</span><br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">{</span>animate<span style="color: #E02020; ">}</span><br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">{</span>tikz<span style="color: #E02020; ">}</span><br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">{</span>xcolor<span style="color: #E02020; ">}</span><br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">usepackage</span><span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">active, tightpage</span><span style="color: #E02020; ">]{</span>preview<span style="color: #E02020; ">}</span><br />
<span style="color: #800000; font-weight: normal;">\PreviewEnvironment</span>{animateinline</span><span style="color: #E02020; ">}</span><br />
<span style="color: #2C922C; font-style: italic;">%\PreviewEnvironment{tikzpicture}</span><br />
<br />
<span style="color: #800000; font-weight: normal;">\tikzset</span><span style="color: #E02020; ">{</span><span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; cellframe/.style=<span style="color: #E02020; ">{</span><span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; minimum size=5mm,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; draw,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fill=white,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fill opacity=0<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; <span style="color: #E02020; ">}</span><span style="color: #2C922C; font-style: italic;">%</span><br />
<span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #800000; font-weight: normal;">\tikzset</span><span style="color: #E02020; ">{</span><span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; alivecell/.style=<span style="color: #E02020; ">{</span><span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; circle,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; inner sep=0pt,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; minimum size=4mm,<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; fill=black<span style="color: #2C922C; font-style: italic;">%</span><br />
&nbsp; &nbsp; <span style="color: #E02020; ">}</span><span style="color: #2C922C; font-style: italic;">%</span><br />
<span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #E02020; ">\</span><span style="color: #800000;">setlength</span><span style="color: #E02020; ">{</span><span style="color: #2020C0; font-weight: normal;"><span style="color: #800000; font-weight: normal;">\PreviewBorder</span><span style="color: #E02020; ">}{</span>5mm<span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">document</span><span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">luacode*</span><span style="color: #E02020; ">}</span><br />
&nbsp; &nbsp; iterations = 36<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; grid = <span style="color: #E02020; ">{{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 1, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 1, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 1, 1, 1, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}</span>,<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #E02020; ">{</span>0, 0, 0, 0, 0, 0, 0, 0, 0<span style="color: #E02020; ">}}</span><br />
<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">luacode*</span><span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">luacode*</span><span style="color: #E02020; ">}</span><br />
&nbsp; &nbsp; function evolve(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; local temp = <span style="color: #E02020; ">{}</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; local gridsize = #grid<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">]</span> = <span style="color: #E02020; ">{}</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for j = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> = 0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for j = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; iminus = i - 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; iplus = i + 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jminus = j - 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jplus = j + 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if iminus == 0 then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; iminus = gridsize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if iplus == gridsize + 1 then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; iplus = 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if jminus == 0 then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jminus = gridsize<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if jplus == gridsize + 1 then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jplus = 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; neighbourcount = grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iminus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jminus</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iminus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iminus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jplus</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jminus</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jplus</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iplus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jminus</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iplus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> +<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">iplus</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">jplus</span><span style="color: #E02020; ">]</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> == 1 and (neighbourcount == 2 or neighbourcount == 3)) or (grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> == 0 and neighbourcount == 3) then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> = 1<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; temp<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">]</span> = 0<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; return temp<br />
&nbsp; &nbsp; end<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; function display(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; local gridsize = #grid<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for j = 1, gridsize do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #800000; font-weight: normal;">\node</span>[cellframe</span><span style="color: #E02020; ">]</span> at (<span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint((i - 1) * 5)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[mm,</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(-((j - 1) * 5))<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #E02020; "><span style="color: #C08020; font-weight: normal;">[mm){0};</span></span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if grid<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">j</span><span style="color: #E02020; ">][</span><span style="color: #C08020; font-weight: normal;">i</span><span style="color: #E02020; ">]</span> == 1 then<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #800000; font-weight: normal;">\node</span>[alivecell</span><span style="color: #E02020; ">]</span> at (<span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint((i - 1) * 5)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[mm,</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(-((j - 1) * 5))<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #E02020; "><span style="color: #C08020; font-weight: normal;">[mm){1};</span></span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; end<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; function animate(grid, iterations)<br />
&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, iterations - 1 do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; display(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #800000; font-weight: normal;">\newframe</span></span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid = evolve(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; display(grid)<br />
&nbsp; &nbsp; end<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; function frames(grid, iterations)<br />
&nbsp; &nbsp; &nbsp; &nbsp; for i = 1, iterations - 1 do<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span>}</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; display(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; grid = evolve(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span>}</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #800000; font-weight: normal;">\clearpage</span></span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; end<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span>}</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; &nbsp; &nbsp; display(grid)<br />
&nbsp; &nbsp; &nbsp; &nbsp; tex.sprint(<span style="color: #E02020; ">[</span><span style="color: #C08020; font-weight: normal;">[<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span>}</span><span style="color: #E02020; ">]]</span>)<br />
&nbsp; &nbsp; end<br />
<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">luacode*</span><span style="color: #E02020; ">}</span><br />
<br />
<span style="color: #800000; font-weight: normal;">\noindent</span><span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">animateinline</span><span style="color: #E02020; ">}[</span><span style="color: #C08020; font-weight: normal;">autoplay,loop,<br />
begin=<span style="color: #E02020; ">{</span><span style="color: #C00000; font-weight: normal;">\begin</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span>}[scale=1</span><span style="color: #E02020; ">]}</span>,<br />
end=<span style="color: #E02020; ">{</span><span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">tikzpicture</span><span style="color: #E02020; ">}}]{</span>5<span style="color: #E02020; ">}</span><br />
&nbsp; &nbsp; <span style="color: #800000; font-weight: normal;">\luadirect</span><span style="color: #E02020; ">{</span>animate(grid, iterations)<span style="color: #E02020; ">}</span><br />
<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #0000D0; font-weight: normal;">animateinline</span></span><span style="color: #E02020; ">}</span><br />
<span style="color: #2C922C; font-style: italic;">%\noindent\luadirect{frames(grid, iterations)}</span><br />
<br />
<span style="color: #C00000; font-weight: normal;">\end</span><span style="color: #E02020; ">{</span><span style="color: #2020C0; font-weight: normal;"><span style="color: #0000D0; font-weight: normal;">document</span></span><span style="color: #E02020; ">}</span></div></td></tr></tbody></table></div>
<p><em>Note:</em> More information about my implementation is available <a href="http://tex.stackexchange.com/a/145463/8844">in my answer on TeX.SX</a>.</p>
<p>It turned out to be pretty easy to do this in LuaTeX, however I struggled with the modulus operator (<code class="codecolorer text dawn"><span class="text">%</span></code>) and printing from Lua to TeX. Still it became a pretty nice solution, I think.</p>
<p>Last but not least I&#8217;m very grateful for the answers on my question. Here are some nice outputs of <a href="http://tex.stackexchange.com/a/145331/8844">jfbu&#8217;s</a> and <a href="http://tex.stackexchange.com/a/145336/8844">JLDiaz&#8217;s</a> answers (if you have a <a href="http://tex.stackexchange.com/" title="TeX - LaTeX Stack Exchange">TeX.SX</a> registration then please post an upvote on them because they are really great):</p>
<p><img src="http://sidenote.hu/wp-content/uploads/2013/11/jfbu_1.gif" alt="Gosper glider gun" width="705" height="374" class="alignnone size-full wp-image-8509" /><br /><img src="http://sidenote.hu/wp-content/uploads/2013/11/jfbu_2.gif" alt="Glider" width="197" height="286" class="alignnone size-full wp-image-8510" />&nbsp;<img src="http://sidenote.hu/wp-content/uploads/2013/11/jldiaz_1.gif" alt="Glider" width="239" height="226" class="alignnone size-full wp-image-8512" /><br /><img src="http://sidenote.hu/wp-content/uploads/2013/11/jldiaz_2.gif" alt="Gosper glider gun" width="456" height="238" class="alignnone size-full wp-image-8513" /></p>
]]></content:encoded>
			</item>
		<item>
		<title>&#8222;Hordozható time-lapse kamera Raspberry Pi-ból és ételdobozból&#8221; &#8211; Mi, mennyi, hogyan, mikor?</title>
		<link>http://sidenote.hu/2013/11/04/hordozhato-time-lapse-kamera/</link>
		<pubDate>Mon, 04 Nov 2013 17:13:37 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[fotó]]></category>
		<category><![CDATA[hardver]]></category>
		<category><![CDATA[ismeretterjesztő]]></category>
		<category><![CDATA[Linux]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[Bash]]></category>
		<category><![CDATA[Raspberry Pi]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8425</guid>
		<description><![CDATA[Múlt héten jött a hír, hogy rendelhető a Raspberry Pi-hez készített infravörös filter nélküli kamera a Pi NoIR. Kép: adafruit industries blog Azonnal rendeltem is&#8230;]]></description>
				<content:encoded><![CDATA[<p>Múlt héten <a href="http://hup.hu/cikkek/20131030/megerkezett_a_pi_noir+" title="Megérkezett a Pi NoIR  | HUP">jött a hír</a>, hogy rendelhető a Raspberry Pi-hez készített infravörös filter nélküli kamera a Pi NoIR.</p>
<p><img src="http://sidenote.hu/wp-content/uploads/2013/11/pi_noir.png" alt="Pi NoIR" title="Pi NoIR" width="705" height="542" class="alignnone size-full wp-image-8452" srcset="http://sidenote.hu/wp-content/uploads/2013/11/pi_noir.png 705w, http://sidenote.hu/wp-content/uploads/2013/11/pi_noir-225x172.png 225w, http://sidenote.hu/wp-content/uploads/2013/11/pi_noir-350x269.png 350w" sizes="(max-width: 705px) 100vw, 705px" /></p>
<p>Kép: <a href="http://www.adafruit.com/blog/2013/10/25/new-product-raspberry-pi-noir-camera-board-infrared-sensitive-camera-raspberry_pi-raspberrypi-piday/" title="NEW PRODUCT &#8211; Raspberry Pi NoIR Camera Board &#8211; Infrared-sensitive Camera @raspberry_pi #raspberrypi #piday &laquo;  adafruit industries blog">adafruit industries blog</a></p>
<p>Azonnal rendeltem is egyet, majd írtam egy kommentet a HUP-ra, hogy <a href="http://sidenote.hu/2013/09/22/ezen-dolgozom-mostanaban/" title="Ezen &bdquo;dolgozom&rdquo; mostanában / sidenote">én mire használom a kamera modult</a>. <a href="http://hup.hu/user/1">trey-nek</a> megtetszett, amit írtam, és írt is <a href="http://hup.hu/cikkek/20131101/hordozhato_timelapse_kamera_raspberry_pi-bol_es_eteldobozbol" title="Hordozható time-lapse kamera Raspberry Pi-ból és ételdobozból | HUP">egy bejegyzést</a> az ételdobozból és Raspberry Pi-ból készített time-lapse kamerámról.</p>
<p>Ennek eredményeképpen több megkeresést kaptam, hogy mennyibe kerül egy ilyen hordozható time-lapse kamerát összeállítani, illetve milyen szoftvereket használok, ezt próbálom most összefoglalni.</p>
<p><em>Szeretném megjegyezni, hogy <a href="https://www.youtube.com/playlist?list=PLfjeGRLzSvZtsOWJ4LktyMTLXxj_kxQv5" title="Raspberry Pi Camera Board Timelapse Video Tests - YouTube">az eddig elkészült felvételek</a> még nincsenek kész, nincsenek megvágva, nincs rajtuk javítás stb. A cél egy hosszabb videó, vagy klip vagy ilyesmi készítése, és még nagyon az elején járok a dolognak.</em></p>
</p>
<h3>Miből áll és mennyibe kerül?</h3>
<p>A legegyszerűbb, ha felsorolom az alkatrészeket. (Az árak mellett feltüntettem, hogy milyen pénznemben értendők, mert pár dolgot külföldről rendeltem.)</p>
<ul>
<li><em><a href="http://piregistration.element14.com/raspberryPi1.html" title="Raspberry Pi Model B | Farnell">Raspberry Pi Model B (rev2)</a>:</em> 35&thinsp;USD &ndash; Napi árfolyam kérdése, hogy Forintban mennyi.</li>
<li><em><a href="http://uk.farnell.com/raspberry-pi/rpi-camera-board/raspberry-pi-camera-board-5mp/dp/2302279" title="Raspberry Pi Camera Board | Farnell">Raspberry Pi Camera Board</a>:</em> 16.56&thinsp;GBP &ndash; Napi árfolyam kérdése, hogy Forintban mennyi.</li>
<li><em><a href="http://elinux.org/RPi_USB_Wi-Fi_Adapters" title="RPi USB Wi-Fi Adapters - eLinux.org">Wi-Fi USB adapter</a>:</em> ~2000&ndash;4000&thinsp;HUF &ndash; Nagyon fontos, hogy elég legyen neki az az áram, amit az RPi közvetlenül le tud adni, különben powered hubot kellene használni.</li>
<li><em>SD kártya:</em> ~5000+&thinsp;HUF &ndash; Legalább 16&thinsp;GB-os, class 10-es SD kártyát ajánlok, mert egy-egy fotózás alkalmával simán összejön 4&ndash;5&thinsp;GB fotó.</li>
<li><em>2&thinsp;db 4-es AA elemtartó:</em> ~150 HUF &ndash; Bármelyik elektronikai üzletben kapható.</li>
<li><em>kapcsoló:</em> ~25 HUF &ndash; Nem emlékszem, hogy mennyibe került, 100 HUF alatt van az biztos.</li>
<li><em>8&thinsp;db 2500&thinsp;mAh-ás 1,2&thinsp;V-os NiMH akkumulátor:</em> ~4000&ndash;8000&thinsp;HUF &ndash; Az ár a márkától függ, nekem eléggé noname van. :)</li>
<li><em>ételdoboz:</em> ~1000&thinsp;HUF &ndash; Fontos, hogy légmentesen zárható legyen, így eső esetén nem folyik be a víz, a köd nem okoz gondot stb.</li>
<li><em>matt akrilfesték spray (fekete és fehér):</em> ~2000&thinsp;HUF &ndash; Az ételdoboz belülről feketére, kívülről fehérre van fújva. Belül fekete, hogy a különböző ledek fényét, villogását elnyelje nehogy becsillanjon a kamerába. Kívülről azért fehér, hogy visszaverje a fényt a melegedést elkerülendő.</li>
<li><em>UV szűrő:</em> használtan ~500&ndash;1200&thinsp;HUF</li>
<li><em>csavarok, alátétek:</em> ~100&thinsp;HUF</li>
<li><em>fényképezőgép állvány:</em> Ehhez inkább nem írok árat (nekem korábbról volt már egy). Viszont nagyon fontos, hogy ha állvánnyal dolgozom, akkor legyen az állványon alul valami kampó, vagy más, hogy súly lehessen akasztani az aljára. Ugyanis az ételdoboz nagyobb, mint egy átlagos fényképezőgép, és a súlya még elemmel együtt is kicsi, ezért könnyen belekap a szél.</li>
<li><em>egyebek:</em> maszkolószalag, szigetelőszalag, drót, forrasztópáka, forrasztóón, fenyőléc, laminált padlódarab. Utóbbi rögzíti a dobozt az állványra; úgy &bdquo;faragtam&rdquo;, hogy az állvány fejébe illeszkedjen. Ezek mind voltak itthon, árat nem tudok mondani.</li>
</ul>
<p>Végösszeg: 28284&thinsp;HUF (mindenből a legolcsóbbal és a mai USD és GBP árfolyammal számoltam).</p>
<p>Ebben nincs benne a fényképezőgép állvány, az itthon talált felhasznált anyagok, alkatrészek, sem az a készíttetett gyűrű, amelybe az UV szűrő illeszkedik. Nem gondoltam volna, hogy ennyit költöttem rá. Sőt, nekem 32&thinsp;GB-os SD kártyám van, és nem is mindenből a legolcsóbb cucc, ráadásul több kamera modulom is van (NOiR is)&hellip; Szóval én valahol 50&thinsp;ezer felett járok.</p>
<h3>Szoftver</h3>
<p><a href="http://sidenote.hu/2013/09/22/ezen-dolgozom-mostanaban/" title="Ezen &bdquo;dolgozom&rdquo; mostanában / sidenote">A legutóbb</a> ennyit írtam a szoftverről:</p>
<blockquote>
<p>A fényképezés mobiltelefonról vezérelhető:</p>
<ul>
<li>A Pi egy USB-s WiFi modul <code class="codecolorer text dawn"><span class="text">hostapd</span></code> és <code class="codecolorer text dawn"><span class="text">isc-dhcp-server</span></code> segítségével szolgáltat hálózatot.</li>
<li>Egy SSH klienssel be lehet jelentkezni a Pi-re.</li>
<li>Egy egyszerű shell script a <a href="http://elinux.org/Rpi_Camera_Module" title="Rpi Camera Module - eLinux.org"><code class="codecolorer text dawn"><span class="text">raspistill</span></code></a> alkalmazással preview képet készít, amit <code class="codecolorer text dawn"><span class="text">netcat</span></code>-tal browserbe továbbítva lehet megtekinteni.</li>
<li>Szintén egy shell scripttel lehet elindítani a fényképezést (5000&thinsp;ms timeout).</li>
</ul>
</blockquote>
<p>Most ezt megpróbálom kicsit jobban kifejteni.</p>
<p>Az RPi-n &bdquo;gyári&rdquo; <a href="http://www.raspbian.org/" title="Raspbian">Raspbian</a> fut, a fényképezéshez pedig a <a href="https://github.com/raspberrypi/userland/tree/master/host_applications/linux/apps/raspicam" title="userland/host_applications/linux/apps/raspicam at master · raspberrypi/userland · GitHub">raspistill</a> programot használom. Az SSH szerver szintén a &bdquo;gyári&rdquo;, a <code class="codecolorer text dawn"><span class="text">hostapd</span></code> és az <code class="codecolorer text dawn"><span class="text">isc-dhcp-server</span></code> konfigurációját pedig egyszerűen innen puskáztam:</p>
<ul>
<li><a href="http://www.daveconroy.com/using-your-raspberry-pi-as-a-wireless-router-and-web-server/" title="Using your Raspberry Pi as a Wireless Router and Web Server | DaveConroy.com">Using your Raspberry Pi as a Wireless Router and Web Server | DaveConroy.com</a></li>
<li><a href="http://www.daveconroy.com/turn-your-raspberry-pi-into-a-wifi-hotspot-with-edimax-nano-usb-ew-7811un-rtl8188cus-chipset/" title="Turn Your Raspberry Pi Into a WiFi Hotspot with Edimax Nano USB EW-7811Un (RTL8188CUS chipset) | DaveConroy.com">Turn Your Raspberry Pi Into a WiFi Hotspot with Edimax Nano USB EW-7811Un (RTL8188CUS chipset) | DaveConroy.com</a></li>
</ul>
<p>A használt scriptek pedig letölthetők:</p>
<ul>
<li><a href="http://sidenote.hu/wp-content/uploads/2013/11/scripts.tar.gz" title="scripts.tar.gz">scripts.tar.gz</a></li>
</ul>
<p>Nincs bennük semmi magic. A fényképezésre külön scriptek vannak (<code class="codecolorer text dawn"><span class="text">capture-*.sh</span></code>), amelyekben csak a két kép közötti timeout az eltérő. Preview-t pedig a <code class="codecolorer text dawn"><span class="text">preview.sh</span></code> scripttel lehet készíteni. Ez utóbbi ahhoz kell, hogy a fényképezés elindítása előtt rendesen be lehessen állítani az állványt és a kamerát.</p>
<h3>Képek feldolgozása</h3>
<p>A képek bizgetéséhez <a href="http://www.imagemagick.org/script/index.php" title="ImageMagick: Convert, Edit, Or Compose Bitmap Images">ImageMagick</a>-et használok. Itt egy szokásos, csak croppoláshoz és átméretezéshez használt parancs, ami végigmegy a megadott könyvtárban található összes jpg fájlon:</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;">mogrify <span style="color: #660033;">-gravity</span> northwest <span style="color: #660033;">-crop</span> 2592x1458+<span style="color: #000000;">0</span>+<span style="color: #000000;">308</span> +repage <span style="color: #660033;">-resize</span> 1920x <span style="color: #660033;">-format</span> png \<br />
<span style="color: #660033;">-path</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>capture<span style="color: #000000; font-weight: bold;">/</span>cap1_processed<span style="color: #000000; font-weight: bold;">/</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>capture<span style="color: #000000; font-weight: bold;">/</span>cap1<span style="color: #000000; font-weight: bold;">/*</span>.jpg</div></div>
<p>Egy másik paraméterezéssel már a színeket is állítgattam (ennek az eredménye látható a poszt végén):</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;">mogrify <span style="color: #660033;">-gravity</span> northwest <span style="color: #660033;">-contrast</span> <span style="color: #660033;">-contrast</span> <span style="color: #660033;">-color-matrix</span> <span style="color: #ff0000;">&quot;1.2 -0.1 -0.1 -0.1 1.2 -0.1 -0.1 -0.1 1.2&quot;</span> \<br />
<span style="color: #660033;">-crop</span> 2592x1458+<span style="color: #000000;">0</span>+<span style="color: #000000;">243</span> +repage <span style="color: #660033;">-resize</span> 1920x <span style="color: #660033;">-format</span> png \<br />
<span style="color: #660033;">-path</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>capture<span style="color: #000000; font-weight: bold;">/</span>cap28_processed_enhanced<span style="color: #000000; font-weight: bold;">/</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>cap28<span style="color: #000000; font-weight: bold;">/*</span>.jpg</div></div>
<p>Az utolsó példában pedig egy 1,6&thinsp;fokos forgatás, vágás és átméretezés van:</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;">mogrity <span style="color: #660033;">-gravity</span> center <span style="color: #660033;">-background</span> <span style="color: #ff0000;">&quot;rgb(0,255,0)&quot;</span> <span style="color: #660033;">-rotate</span> <span style="color: #ff0000;">&quot;1.60&quot;</span> +repage <span style="color: #660033;">-gravity</span> northwest \<br />
<span style="color: #660033;">-crop</span> 2446x1376+<span style="color: #000000;">54</span>+<span style="color: #000000;">176</span> +repage <span style="color: #660033;">-resize</span> 1920x <span style="color: #660033;">-format</span> png \<br />
<span style="color: #660033;">-path</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>capture<span style="color: #000000; font-weight: bold;">/</span>cap30_processed<span style="color: #000000; font-weight: bold;">/</span> <span style="color: #000000; font-weight: bold;">/</span>media<span style="color: #000000; font-weight: bold;">/</span>szantaii<span style="color: #000000; font-weight: bold;">/</span>Tibor<span style="color: #000000; font-weight: bold;">/</span>capture<span style="color: #000000; font-weight: bold;">/</span>cap30<span style="color: #000000; font-weight: bold;">/*</span>.jpg</div></div>
<p>A felsoroltakon kívül még az ImageMagick <a href="http://www.imagemagick.org/Usage/color_mods/#sigmoidal" title="Color Modifications -- IM v6 Examples"><code class="codecolorer text dawn"><span class="text">-sigmoidal-contrast</span></code></a> operátorával &bdquo;játszottam&rdquo;.</p>
<p>Az eddigi parancsokkal csak a képeket dolgoztam fel. A képekből a videót pedig <a href="http://www.ffmpeg.org/" title="FFmpeg">FFmpeg-gel</a> fűzöm össze. A végeredményt 30 és 60&thinsp;fps-be is ki szoktam renderelni, hogy lássam melyik néz ki jobban. A 30 és a 60&thinsp;fps generálása között csak annyi a különbség, hogy az FFmpeg-nek meg kell adni, hogyan értelmezze a bemenetként szolgáló képeket, vagyis az <code class="codecolorer text dawn"><span class="text">-r</span></code> kapcsoló után 30-at vagy 60-at kell írni.</p>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #c20cb9; font-weight: bold;">ffmpeg</span> <span style="color: #660033;">-r</span> <span style="color: #000000;">30</span> <span style="color: #660033;">-i</span> <span style="color: #000000; font-weight: bold;">%</span>06d.png <span style="color: #660033;">-vcodec</span> libx264 <span style="color: #660033;">-vprofile</span> high444 <span style="color: #660033;">-vlevel</span> <span style="color: #000000;">4.2</span> -pix_fmt yuv420p ~<span style="color: #000000; font-weight: bold;">/</span>Desktop<span style="color: #000000; font-weight: bold;">/</span>test_30fps.mp4</div></div>
<div class="codecolorer-container bash dawn" style="overflow:auto;white-space:nowrap;border:1px solid #9F9F9F;width:435px;"><div class="bash codecolorer" style="padding:5px;font:normal 12px/1.4em Monaco, Lucida Console, monospace;white-space:nowrap;"><span style="color: #c20cb9; font-weight: bold;">ffmpeg</span> <span style="color: #660033;">-r</span> <span style="color: #000000;">60</span> <span style="color: #660033;">-i</span> <span style="color: #000000; font-weight: bold;">%</span>06d.png <span style="color: #660033;">-vcodec</span> libx264 <span style="color: #660033;">-vprofile</span> high444 <span style="color: #660033;">-vlevel</span> <span style="color: #000000;">4.2</span> -pix_fmt yuv420p ~<span style="color: #000000; font-weight: bold;">/</span>Desktop<span style="color: #000000; font-weight: bold;">/</span>test_60fps.mp4</div></div>
<p><iframe src="//player.vimeo.com/video/77900126?color=ffffff" width="705" height="396" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>
<p>Hirtelen (az elmúlt másfél órában) ennyi jutott eszembe.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Ezen &#8222;dolgozom&#8221; mostanában</title>
		<link>http://sidenote.hu/2013/09/22/ezen-dolgozom-mostanaban/</link>
		<comments>http://sidenote.hu/2013/09/22/ezen-dolgozom-mostanaban/#comments</comments>
		<pubDate>Sun, 22 Sep 2013 08:41:12 +0000</pubDate>
		<dc:creator><![CDATA[szantaii]]></dc:creator>
				<category><![CDATA[alkotunk]]></category>
		<category><![CDATA[fotó]]></category>
		<category><![CDATA[hardver]]></category>
		<category><![CDATA[Linux]]></category>
		<category><![CDATA[szoftver]]></category>
		<category><![CDATA[Bash]]></category>
		<category><![CDATA[Raspberry Pi]]></category>

		<guid isPermaLink="false">http://sidenote.hu/?p=8363</guid>
		<description><![CDATA[Nem a stencilen. Azon Király András dolgozott: aprólékos munkával kivágta az 5&#8201;cm magas mintát, és ráfújta arra a dologra, amin &#8222;dolgozom&#8221;. A legutóbbi befuccsolt projektem&#8230;]]></description>
				<content:encoded><![CDATA[<p><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspberry_pi_logo_stencil.png" alt="Raspberry Pi stencil" width="705" height="500" class="alignnone size-full wp-image-8372" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspberry_pi_logo_stencil.png 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspberry_pi_logo_stencil-225x159.png 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspberry_pi_logo_stencil-350x248.png 350w" sizes="(max-width: 705px) 100vw, 705px" /></p>
<p>Nem a stencilen. Azon Király András dolgozott: aprólékos munkával kivágta az 5&thinsp;cm magas mintát, és ráfújta arra a dologra, amin &bdquo;dolgozom&rdquo;.</p>
<p>A <a href="http://sidenote.hu/2013/07/21/basis-of-a-raspberry-pi-controlled-car/" title="Basis of a Raspberry Pi controlled car(?)">legutóbbi befuccsolt projektem</a> után, arra gondoltam, hogy valami egyszerűbbel próbálkozom: építek egy hordozható kamerát. Mindehhez egy Raspberry Pi-t, a hozzá tartozó <a href="http://uk.farnell.com/jsp/search/productdetail.jsp?SKU=2302279" title="Raspberry Pi Camera Board, 5MP | Farnell United Kingdom">kamera modult</a>, néhány újratölthető elemet és egy hermetikusan zárható ételdobozt használtam fel.</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8375" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_1.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8378" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_4.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a></p>
<p>A célom, hogy kihozzam a maximumot a Raspberry Pi kamera moduljából, hogy megmutassam&hellip; Valamit, amit még meg kell, hogy fogalmazzak. Igazából ez nekem hobbi és játék. Szeretnék egy érdekes, Budapestet bemutató timelapse videót összerakni.</p>
<p>A működéséről röviden, tömören &ndash; és valószínűleg a többség számára érthetetlenül &ndash; a képek után.</p>
<p><a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8376" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_2.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8377" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_3.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a><br /><a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8379" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_5.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a>&nbsp;<a href="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6.jpg"><img src="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6-350x263.jpg" alt="Raspberry Pi camera" width="350" height="263" class="alignnone size-medium wp-image-8380" srcset="http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6-350x263.jpg 350w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6-225x169.jpg 225w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6-705x530.jpg 705w, http://sidenote.hu/wp-content/uploads/2013/09/raspicam_6.jpg 1024w" sizes="(max-width: 350px) 100vw, 350px" /></a><br /><a href="http://sidenote.hu/wp-content/uploads/2013/09/gpio_power.png"><img src="http://sidenote.hu/wp-content/uploads/2013/09/gpio_power-705x512.png" alt="Feeding Raspberry Pi through GPIO" width="705" height="512" class="alignnone size-large wp-image-8397" srcset="http://sidenote.hu/wp-content/uploads/2013/09/gpio_power-705x512.png 705w, http://sidenote.hu/wp-content/uploads/2013/09/gpio_power-225x163.png 225w, http://sidenote.hu/wp-content/uploads/2013/09/gpio_power-350x254.png 350w, http://sidenote.hu/wp-content/uploads/2013/09/gpio_power.png 1024w" sizes="(max-width: 705px) 100vw, 705px" /></a></p>
<p>A táp 2&thinsp;&times;&thinsp;4&thinsp;db sorban kötött 1.2&thinsp;V-os 2500&thinsp;mAh-ás akkumulátor párhuzamosan kötve. Így jön össze a 4.8&thinsp;V és az 5000&thinsp;mAh, amivel kb. 4,5&ndash;5&thinsp;órát tényleg ki is bír a Pi.</p>
<p>A fényképezés mobiltelefonról vezérelhető:</p>
<ul>
<li>A Pi egy USB-s WiFi modul <code class="codecolorer text dawn"><span class="text">hostapd</span></code> és <code class="codecolorer text dawn"><span class="text">isc-dhcp-server</span></code> segítségével szolgáltat hálózatot.</li>
<li>Egy SSH klienssel be lehet jelentkezni a Pi-re.</li>
<li>Egy egyszerű shell script a <a href="http://elinux.org/Rpi_Camera_Module" title="Rpi Camera Module - eLinux.org"><code class="codecolorer text dawn"><span class="text">raspistill</span></code></a> alkalmazással preview képet készít, amit <code class="codecolorer text dawn"><span class="text">netcat</span></code>-tal browserbe továbbítva lehet megtekinteni.</li>
<li>Szintén egy shell scripttel lehet elindítani a fényképezést (5000&thinsp;ms timeout).</li>
</ul>
<p>A következő playlistben láthatók 30 és 60 fps-sel lejátszva az eddig készített felvételek. Tudom, hogy nem jó az optika &ndash; hisz ez csak egy kis fix fókuszos &bdquo;vacak&rdquo; &ndash;, amatőr stb., de mint mondtam, ez nekem hobbi és játék. Remélem, azért másnak is tetszik majd az eredmény.</p>
<p><iframe width="705" height="427" src="//www.youtube.com/embed/sqTO2bY7fco?list=PLfjeGRLzSvZtsOWJ4LktyMTLXxj_kxQv5" frameborder="0" allowfullscreen></iframe></p>
<p>Végül álljon itt a <a href="http://en.wikipedia.org/wiki/Raspberry_Pi_Foundation" title="Raspberry Pi Foundation - Wikipedia, the free encyclopedia" >Raspberry Pi Foundation-t</a> vezető Eben Upton előadása a napokban tartott LinuxCon North America 2013 konferenciáról. (Nagyon jó.)</p>
<p><iframe width="705" height="427" src="//www.youtube.com/embed/PmCsQDTc-WU?rel=0" frameborder="0" allowfullscreen></iframe></p>
]]></content:encoded>
			<wfw:commentRss>http://sidenote.hu/2013/09/22/ezen-dolgozom-mostanaban/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
		</item>
	</channel>
</rss>
